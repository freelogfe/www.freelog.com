{"source":"webpackJsonp([8],{\"8Qhf\":function(t,e,n){\"use strict\";var i=n(\"fnIZ\"),s=n(\"HkHh\"),a=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,s=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw a}}return n}(t,e);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),r={data:function(){return{activeIndex:\"0\",routerMap:{0:\"/pages/account/index.html\",1:\"/pages/account/security.html\"}}},mounted:function(){this.initDefaultAcitve()},components:{NavTopBar:s.a},methods:{initDefaultAcitve:function(){var t=location.pathname,e=!0,n=!1,i=void 0;try{for(var s,r=Object.entries(this.routerMap)[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var o=s.value,c=a(o,2),l=c[0];if(c[1]===t){this.activeIndex=l.toString();break}}}catch(t){n=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(n)throw i}}},routeHandler:function(t){location.href=this.routerMap[t]||\"/\"}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[n(\"nav-top-bar\"),t._v(\" \"),n(\"el-container\",{staticClass:\"app-container\"},[n(\"el-header\"),t._v(\" \"),n(\"el-container\",[n(\"el-aside\",[n(\"el-menu\",{attrs:{\"default-active\":t.activeIndex}},[n(\"el-menu-item\",{attrs:{index:\"0\"},on:{click:function(e){t.routeHandler(0)}}},[n(\"i\",{staticClass:\"el-icon-fa-user-circle-o\"}),t._v(\"基本信息\\n          \")]),t._v(\" \"),n(\"el-menu-item\",{attrs:{index:\"1\"},on:{click:function(e){t.routeHandler(1)}}},[n(\"i\",{staticClass:\"el-icon-fa-lock\"}),t._v(\"安全设置\\n          \")])],1)],1),t._v(\" \"),n(\"el-main\",{staticStyle:{background:\"white\"}},[n(\"div\",{attrs:{id:\"main-app\"}})])],1)],1)],1)},staticRenderFns:[]},c=n(\"VU/8\")(r,o,!1,function(t){n(\"9E1Z\")},null,null).exports,l=n(\"IcnI\");new i.a({el:\"#app\",store:l.a,render:function(t){return t(c)}});e.a=i.a},\"9E1Z\":function(t,e,n){},E1zW:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(\"8Qhf\"),s=n(\"NYxO\"),a={data:function(){return{}},mounted:function(){},computed:Object.assign({userRoles:function(){var t=this.user.userRole;return[{val:1,name:\"普通用户\"},{val:2,name:\"节点商\"},{val:4,name:\"资源商\"}].reduce(function(e,n){return(n.val&t)===n.val&&e.push(n.name),e},[]).join(\"|\")}},Object(s.b)({user:\"session\"})),methods:{}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{attrs:{id:\"app\"}},[n(\"ul\",{staticClass:\"setting-items\"},[n(\"li\",[t._m(0),t._v(\" \"),n(\"span\",{staticClass:\"setting-desc\"},[t._v(t._s(t.user.email||t.user.mobile))]),t._v(\" \"),n(\"div\",{staticClass:\"setting-action\"},[n(\"el-button\",{attrs:{type:\"text\"}},[t._v(\"查看\")])],1)]),t._v(\" \"),n(\"li\",[t._m(1),t._v(\" \"),n(\"span\",{staticClass:\"setting-desc\"},[t._v(t._s(t.user.nickname))])]),t._v(\" \"),n(\"li\",[t._m(2),t._v(\" \"),n(\"span\",{staticClass:\"setting-desc\"},[t._v(t._s(t.userRoles))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e(\"span\",{staticClass:\"setting-title\"},[e(\"label\",[this._v(\"loginName\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"span\",{staticClass:\"setting-title\"},[e(\"label\",[this._v(\"用户名\")])])},function(){var t=this.$createElement,e=this._self._c||t;return e(\"span\",{staticClass:\"setting-title\"},[e(\"label\",[this._v(\"用户角色\")])])}]},o=n(\"VU/8\")(a,r,!1,function(t){n(\"V4Af\")},null,null).exports;new i.a({el:\"#main-app\",render:function(t){return t(o)}})},H4bk:function(t,e,n){},HkHh:function(t,e,n){\"use strict\";var i=n(\"NYxO\"),s={name:\"nav-top-bar\",data:function(){return{}},computed:Object(i.b)({userInfo:\"session\"}),mounted:function(){this.syncUserSession(),this.listenWindowVisibility()},methods:{listenWindowVisibility:function(){function t(t){var n=\"visible\",s=\"hidden\",a={focus:n,focusin:n,pageshow:n,blur:s,focusout:s,pagehide:s};\"visible\"===((t=t||window.event).type in a?a[t.type]:this[e]?\"hidden\":\"visible\")&&i.syncUserSession()}var e=\"hidden\",n=document,i=this;e in n?n.addEventListener(\"visibilitychange\",t):(e=\"mozHidden\")in n?n.addEventListener(\"mozvisibilitychange\",t):(e=\"webkitHidden\")in n?n.addEventListener(\"webkitvisibilitychange\",t):(e=\"msHidden\")in n?n.addEventListener(\"msvisibilitychange\",t):window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t},syncUserSession:function(){var t=this;this.$store.dispatch(\"checkUserSession\").then(function(e){e||t.$store.dispatch(\"getCurrentUser\").then(function(){location.reload()})})},logoutHandler:function(){var t=this;this.$axios.get(\"/v1/passport/logout\").then(function(){t.$vuex.dispatch(\"userLogout\").then(function(){setTimeout(function(){location.replace(\"/pages/user/login.html\")},20)})})},handleNavTopCommand:function(t){switch(t){case\"gotoAccountSetting\":location.href=\"/pages/account/security.html\"}}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"nav-top-wrapper\"},[t.userInfo?n(\"div\",{staticClass:\"nav-top-container\"},[n(\"ul\",{staticClass:\"nav-top-right\"},[n(\"li\",{staticClass:\"nav-top-item\"},[n(\"el-dropdown\",{on:{command:t.handleNavTopCommand}},[n(\"span\",{staticClass:\"el-dropdown-link\"},[t._v(\"\\n                      \"+t._s(t.userInfo.nickname)),n(\"i\",{staticClass:\"el-icon-arrow-down el-icon--right\"})]),t._v(\" \"),n(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[n(\"el-dropdown-item\",{attrs:{command:\"gotoAccountSetting\"}},[t._v(\"账户设置\")])],1)],1)],1),t._v(\" \"),n(\"li\",{staticClass:\"nav-top-item\",on:{click:t.logoutHandler}},[t._v(\"退出\")]),t._v(\" \"),t._m(0)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e(\"li\",{staticClass:\"nav-top-item\"},[e(\"a\",{attrs:{href:\"/pages/user/index.html\"}},[this._v(\"我的feth\")])])}]},r=n(\"VU/8\")(s,a,!1,function(t){n(\"H4bk\")},\"data-v-3c0b87cc\",null);e.a=r.exports},V4Af:function(t,e,n){},fnIZ:function(t,e,n){\"use strict\";var i=n(\"G3VR\"),s=n(\"IcnI\");e.a=function(t){new i.a(Object.assign({el:\"#app\",store:s.a},t))}}},[\"E1zW\"]);"}