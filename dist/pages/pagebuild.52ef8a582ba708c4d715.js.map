{"version":3,"sources":["webpack:///pages/pagebuild.52ef8a582ba708c4d715.js","webpack:///./src/components/toolbar/index.vue","webpack:///./src/pages/pagebuild/contract-state/direct-graph.js","webpack:///./src/pages/pagebuild/contract-state/index.js","webpack:///./src/pages/pagebuild/contract-state/index.vue","webpack:///src/pages/pagebuild/app.vue","webpack:///./src/pages/pagebuild/app.vue","webpack:///./src/components/toolbar/index.js","webpack:///src/components/toolbar/index.vue","webpack:///./src/components/toolbar/index.vue?00ba","webpack:///src/pages/pagebuild/contract-state/index.vue","webpack:///./src/pages/pagebuild/contract-state/index.vue?b907","webpack:///./src/pages/pagebuild/app.vue?df43","webpack:///./src/pages/pagebuild/app.js"],"names":["webpackJsonp","6NG4","module","exports","__webpack_require__","GQ7r","XTzU","__webpack_exports__","injectStyle","ssrContext","DirectGraph","opts","tick","path","attr","d","deltaX","target","x","source","deltaY","y","dist","Math","sqrt","normX","normY","sourcePadding","left","targetPadding","right","circle","restart","data","links","style","enter","append","stateClass","on","p","src","pos","d3","mouse","this","$tip","opacity","top","self","_opts","overlayHandler","innerHTML","JSON","stringify","state","exit","remove","nodes","id","selectAll","classed","reflexive","g","Radius","text","force","start","$svg","width","height","scale","category10","radius","$container","container","document","querySelector","select","parentNode","createElement","classList","add","appendChild","layout","size","linkDistance","charge","forEach","node","push","link","createNode","props","lastNodeId","Object","assign","formatNodes","nodeList","nodeMap","nodeArr","index","resolveStateClass","tmp","nextStates","next","generateRoot","stateTreeRoot","name","children","stateCls","isProcess","isFinish","isWaiting","isActive","setTreeNodePosition","result","root","tree","keys","stateNode","stateMap","key","parseContract","contractData","initStateNode","stateName","targetEvents","activatedStates","includes","curState","deep","walkTree","length","nextNode","nextStateNode","event","nextState","fsmState","policySegment","descs","fsmDescription","initialState","desc","curStateNode","currentState","console","log","contract_state_injectStyle","importHtml","href","Promise","resolve","reject","onload","onerror","rel","head","app_injectStyle","defineProperty","value","toolbar","mounted","methods","showAuthDialog","CustomEvent","detail","action","window","dispatchEvent","components_toolbar","toolbar_render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","title","click","staticRenderFns","aria-hidden","esExports","render","selectortype_template_index_0_src_components_toolbar","normalizeComponent","__vue_styles__","Component","src_components_toolbar","direct_graph","contract_state","contract","type","default","popData","disabled","indexOf","triggerEvents","filter","$refs","popover","showPopper","getComputedStyle","wrapper","stateTree","parseInt","draw","updateContractState","isActivated","triggerLicense","QI","fetch","method","then","res","json","triggerContractState","activateContractHandler","triggerHandler","promise","contractId","eventId","licenseIds","params","ret","errcode","$message","success","error","msg","trigger","hidePopover","nodeName","$el","contains","stopPropagation","resolveData","update","pagebuild_contract_state","contract_state_render","ref","popper-class","placement","directives","rawName","expression","_s","undefined","eventName","$event","_e","contract_state_staticRenderFns","contract_state_esExports","pages_pagebuild_contract_state","contract_state_normalizeComponent","contract_state___vue_styles__","contract_state_Component","src_pages_pagebuild_contract_state","app","policies","contracts","policyData","shouldShowAuthDialog","contractStateData","components","ToolBar","ContractState","authInfo","__auth_info__","authErrorData","__auth_error_info__","addEventListener","serviceDispatchHandler","bind","checkAuthHandler","$widgets","getWidgets","loadWidgets","warn","showPolicyDetailHandler","policyTable","toggleRowExpansion","showContractDetailHandler","row","expanded","contractTable","signPolicyHandler","selectedSegmentId","warning","tip","tagInfo","resourceInfo","resourceName","$confirm","confirmButtonText","cancelButtonText","dangerouslyUseHTMLString","contractType","targetId","presentableId","segmentId","serialNumber","partyTwo","__auth_user_id__","splice","resolveContract","catch","querySelectorAll","loadResourceDetail","resourceId","status","loadContractDetail","resource","resourceDetail","authData","errorMsg","_this","authResult","authErrorCode","loadPolicyDetail","url","policy","parsePolicy","segments","block","segment","states","selected","__auth_node_id__","Array","from","widget","prensentableId","getAttribute","fetchPresentable","parse","err","app_render","close-on-click-modal","visible","fullscreen","custom-class","center","update:visible","label","staticStyle","stripe","scopedSlots","_u","fn","scope","_l","model","callback","$$v","$set","prop","align","$index","app_staticRenderFns","app_esExports","pagebuild_app","app_normalizeComponent","app___vue_styles__","app_Component","pages_pagebuild_app","el","h","x6GI"],"mappings":"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","file":"pages/pagebuild.52ef8a582ba708c4d715.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"6NG4\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// removed by extract-text-webpack-plugin\n    if(false) {\n      // 1512461484290\n      var cssReload = require(\"../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  \n\n/***/ }),\n\n/***/ \"GQ7r\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// removed by extract-text-webpack-plugin\n    if(false) {\n      // 1512461484297\n      var cssReload = require(\"../../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  \n\n/***/ }),\n\n/***/ \"XTzU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./src/layout.js + 1 modules\nvar layout = __webpack_require__(\"rA12\");\n\n// CONCATENATED MODULE: ./src/components/toolbar/index.js\n/* harmony default export */ var toolbar = ({\n    name: 'tool-bar',\n    data: function data() {\n        return {};\n    },\n    mounted: function mounted() {},\n\n    methods: {\n        showAuthDialog: function showAuthDialog() {\n            var event = new CustomEvent('freelogService', { detail: {\n                    action: 'showAuthDialog'\n                } });\n            window.dispatchEvent(event);\n        }\n    }\n});\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/components/toolbar/index.vue\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ var components_toolbar = (toolbar);\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e3ced89c\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbar/index.vue\nvar toolbar_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"tool-bar-wrap\"},[_vm._m(0,false,false),_vm._v(\" \"),_c('li',{staticClass:\"contract-tab\",attrs:{\"title\":\"合同管理\"},on:{\"click\":_vm.showAuthDialog}},[_c('i',{staticClass:\"el-icon-document\"})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"user-tab\",attrs:{\"title\":\"个人中心\"}},[_c('a',{attrs:{\"href\":\"/pages/user/index.html\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-fa-user\",attrs:{\"aria-hidden\":\"true\"}})])])}]\nvar esExports = { render: toolbar_render, staticRenderFns: staticRenderFns }\n/* harmony default export */ var selectortype_template_index_0_src_components_toolbar = (esExports);\n// CONCATENATED MODULE: ./src/components/toolbar/index.vue\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"6NG4\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e3ced89c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  components_toolbar,\n  selectortype_template_index_0_src_components_toolbar,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ var src_components_toolbar = (Component.exports);\n\n// CONCATENATED MODULE: ./src/pages/pagebuild/contract-state/direct-graph.js\n//https://stackoverflow.com/questions/16058073/how-do-i-draw-a-graph-or-tree-structure-in-javascript\n//http://bl.ocks.org/rkirsling/5001347\n// https://bl.ocks.org/cjrd/6863459\n//https://bl.ocks.org/curran/5905182da50a4667dc00\n// https://bl.ocks.org/mbostock/1138500\nfunction DirectGraph(opts) {\n    opts = opts || {};\n    var width = opts.width || 960,\n        height = opts.height || 500,\n        colors = d3.scale.category10();\n    var Radius = opts.radius || 20;\n\n    var self = this;\n    var $svg;\n    var $container = typeof opts.container === 'string' ? document.querySelector(opts.container) : opts.container;\n    this._opts = opts;\n\n    if (opts.container) {\n        $svg = d3.select(opts.container);\n    } else {\n        $svg = d3.select(\"body\").append(\"svg\");\n    }\n    $svg.attr('width', width).attr('height', height);\n\n    var $tip = $container.parentNode.querySelector('.js-svg-tip');\n    if (!$tip) {\n        $tip = document.createElement('div');\n        $tip.classList.add('tip');\n        $container.parentNode.appendChild($tip);\n    }\n    var nodes = [];\n    var links = [];\n\n    // init D3 force layout\n    var force = d3.layout.force().size([width, height]).linkDistance(150).charge(-500).on('tick', tick);\n\n    // define arrow markers for graph links\n    $svg.append('svg:defs').append('svg:marker').attr('id', 'end-arrow').attr('viewBox', '0 -5 10 10').attr('refX', 6).attr('markerWidth', 3).attr('markerHeight', 3).attr('orient', 'auto').append('svg:path').attr('d', 'M0,-5L10,0L0,5').attr('fill', '#000');\n\n    $svg.append('svg:defs').append('svg:marker').attr('id', 'start-arrow').attr('viewBox', '0 -5 10 10').attr('refX', 4).attr('markerWidth', 3).attr('markerHeight', 3).attr('orient', 'auto').append('svg:path').attr('d', 'M10,-5L0,0L10,5').attr('fill', '#000');\n\n    // handles to link and node element groups\n    var path = $svg.append('svg:g').selectAll('path'),\n        circle = $svg.append('svg:g').selectAll('g');\n\n    // update force layout (called automatically each iteration)\n    function tick() {\n        // draw directed edges with proper padding from node centers\n        path.attr('d', function (d) {\n            var deltaX = d.target.x - d.source.x,\n                deltaY = d.target.y - d.source.y,\n                dist = Math.sqrt(deltaX * deltaX + deltaY * deltaY),\n                normX = deltaX / dist,\n                normY = deltaY / dist,\n                sourcePadding = d.left ? 17 : 12,\n                targetPadding = d.right ? 17 : 12,\n                sourceX = d.source.x + sourcePadding * normX,\n                sourceY = d.source.y + sourcePadding * normY,\n                targetX = d.target.x - targetPadding * normX,\n                targetY = d.target.y - targetPadding * normY;\n            return 'M' + sourceX + ',' + sourceY + 'L' + targetX + ',' + targetY;\n        });\n\n        circle.attr('transform', function (d) {\n            return 'translate(' + d.x + ',' + d.y + ')';\n        });\n    }\n\n    //selected变虚线\n    function restart() {\n        // path (link) group\n        path = path.data(links);\n\n        // update existing links\n        path.style('marker-start', function (d) {\n            return d.left ? 'url(#start-arrow)' : '';\n        }).style('marker-end', function (d) {\n            return d.right ? 'url(#end-arrow)' : '';\n        });\n\n        // add new links\n        path.enter().append('svg:path').attr('class', function (d) {\n            return d.target.data.stateClass + ' link';\n        }).style('marker-start', function (d) {\n            return d.left ? 'url(#start-arrow)' : '';\n        }).style('marker-end', function (d) {\n            return d.right ? 'url(#end-arrow)' : '';\n        }).on('mouseenter', function (p) {\n            var src = p.source;\n            var target = p.target;\n            var pos = d3.mouse(this);\n\n            $tip.style.opacity = 1;\n            $tip.style.top = pos[1] + 'px';\n            $tip.style.left = pos[0] + 'px';\n            if (self._opts.overlayHandler) {\n                self._opts.overlayHandler(p, $tip);\n            } else {\n                $tip.innerHTML = JSON.stringify({\n                    source: src.data.state,\n                    target: target.data.state\n                });\n            }\n        });\n\n        // remove old links\n        path.exit().remove();\n\n        // circle (node) group\n        // NB: the function arg is crucial here! nodes are known by id, not by index!\n        circle = circle.data(nodes, function (d) {\n            return d.id;\n        });\n\n        // update existing nodes (reflexive & selected visual states)\n        circle.selectAll('circle').classed('reflexive', function (d) {\n            return d.reflexive;\n        });\n        debugger;\n        // add new nodes\n        var g = circle.enter().append('svg:g');\n        g.append('svg:circle').attr('class', function (d) {\n            return 'node ' + (d.data.stateClass || '');\n        }).attr('r', Radius).on('mouseenter', function (d) {\n            $tip.style.opacity = 1;\n            $tip.style.top = d.y - Radius + 'px';\n            $tip.style.left = d.x + Radius * 1.5 + 'px';\n            if (self._opts.overlayHandler) {\n                self._opts.overlayHandler(d.data, $tip);\n            } else {\n                $tip.innerHTML = JSON.stringify(d.data);\n            }\n        });\n\n        // show node IDs\n        g.append('svg:text').attr('x', 0).attr('y', 4).attr('class', 'id').text(function (d) {\n            // return d.data.state\n            return d.id;\n        });\n\n        // remove old nodes\n        circle.exit().remove();\n\n        // set the graph in motion\n        force.start();\n    }\n\n    opts.nodes.forEach(function (node) {\n        nodes.push(node);\n        restart();\n    });\n\n    opts.links.forEach(function (link) {\n        links.push(link);\n        restart();\n    });\n    return this;\n}\n\n/* harmony default export */ var direct_graph = (DirectGraph);\n// CONCATENATED MODULE: ./src/pages/pagebuild/contract-state/index.js\n\n\nvar lastNodeId = -1;\n\nfunction createNode(props, data) {\n    var node = { id: ++lastNodeId, reflexive: false, data: data };\n    Object.assign(node, props);\n    return node;\n}\n\n//创建渲染需要的数据结构\nfunction formatNodes(nodeList) {\n    var nodes = [];\n    var links = [];\n    var nodeMap = {};\n\n    nodeList.forEach(function (nodeArr, index) {\n        nodeArr.forEach(function (node) {\n            node.stateClass = resolveStateClass(node);\n            var tmp = createNode(node.pos, node);\n\n            nodeMap[node.state] = tmp;\n            nodes.push(tmp);\n        });\n    });\n\n    nodes.forEach(function (node) {\n        node.data.nextStates.forEach(function (next) {\n            links.push({\n                source: node,\n                target: nodeMap[next.state],\n                left: false,\n                right: true\n            });\n        });\n    });\n    return { nodes: nodes, links: links };\n}\n\n//生成d3 tree结构\nfunction generateRoot(stateTreeRoot) {\n    var node = {\n        name: stateTreeRoot.state,\n        children: []\n    };\n\n    stateTreeRoot.nextStates.forEach(function (next) {\n        node.children.push(generateRoot(next));\n    });\n\n    return node;\n}\n\nfunction resolveStateClass(state) {\n    var stateCls = 'is-disabled';\n    if (state.isProcess) {\n        stateCls = 'is-process';\n    } else if (state.isFinish) {\n        stateCls = 'is-finish';\n    } else if (state.isWaiting) {\n        stateCls = 'is-wait';\n    }\n\n    if (state.isActive) {\n        stateCls += ' is-active';\n    }\n    return stateCls;\n}\n\n//根据d3 tree生成的节点坐标设置force 节点的坐标\nfunction setTreeNodePosition(result, opts) {\n    var root = generateRoot(result.stateTreeRoot);\n    var height = opts.height;\n    var width = opts.width;\n    var tree = d3.layout.tree().size([height, width]);\n    var nodes = tree.nodes(root);\n    nodes.forEach(function (node) {\n        var keys = ['depth', 'x', 'y'];\n        var stateNode = result.stateMap[node.name];\n        if (stateNode) {\n            stateNode.pos = {};\n            keys.forEach(function (key) {\n                stateNode.pos[key] = node[key];\n            });\n            //将纵向变成横向\n            var x = stateNode.pos.x;\n            stateNode.pos.x = stateNode.pos.y;\n            stateNode.pos.y = x;\n        }\n    });\n}\n\nfunction parseContract(contractData) {\n    var curState = contractData.fsmState;\n    var policySegment = contractData.policySegment;\n    var descs = policySegment.fsmDescription;\n    var activatedStates = policySegment.activatedStates;\n    var initialState = policySegment.initialState;\n    var stateMap = {};\n    var stateTreeRoot;\n\n    function initStateNode(stateName) {\n        return {\n            nextStates: [],\n            targetEvents: [], //到下一状态可能的路径(事件)\n            state: stateName,\n            isActive: activatedStates.includes(stateName),\n            isProcess: stateName === curState,\n            deep: 0\n        };\n    }\n\n    var nodeList = []; //每层的节点列表\n\n    function walkTree(node) {\n        if (!nodeList[node.deep]) {\n            nodeList[node.deep] = [];\n        }\n        nodeList[node.deep].push(node);\n\n        if (!node.nextStates.length) {\n            return;\n        }\n\n        node.nextStates.forEach(function (nextNode) {\n            var nextStateNode = stateMap[nextNode.state];\n            nextStateNode.deep = node.deep + 1;\n\n            if (node.isProcess || node.isWaiting) {\n                nextStateNode.isWaiting = true;\n            }\n\n            if (nextStateNode.isProcess) {\n                node.isFinish = true;\n            }\n\n            if (nextStateNode.targetEvents.length) {\n                nextStateNode.targetEvents.forEach(function (event) {\n                    if (stateMap[event.nextState] && event.nextState !== node.state) {\n                        nextStateNode.nextStates.push(stateMap[event.nextState]);\n                    }\n                });\n            }\n            walkTree(nextStateNode);\n\n            if (nextStateNode.isFinish) {\n                node.isFinish = true;\n            }\n        });\n    }\n\n    descs.forEach(function (desc) {\n        var curStateNode = stateMap[desc.currentState] || initStateNode(desc.currentState);\n        var nextStateNode = stateMap[desc.nextState];\n\n        curStateNode.targetEvents.push(desc);\n\n        if (!nextStateNode) {\n            nextStateNode = initStateNode(desc.nextState);\n            stateMap[desc.nextState] = nextStateNode;\n        }\n\n        //标记根节点的next，便于初始化遍历\n        if (desc.currentState === initialState) {\n            curStateNode.nextStates.push(nextStateNode);\n        }\n        stateMap[desc.currentState] = curStateNode;\n    });\n\n    stateTreeRoot = stateMap[initialState];\n    walkTree(stateTreeRoot);\n\n    console.log(stateTreeRoot);\n\n    return { stateTreeRoot: stateTreeRoot, stateMap: stateMap, nodeList: nodeList };\n}\n\n/* harmony default export */ var contract_state = ({\n    name: 'contract-state',\n    props: {\n        contract: {\n            type: Object,\n            default: function _default() {\n                return null;\n            }\n        }\n    },\n    data: function data() {\n        var self = this;\n        return {\n            data: null,\n            popData: {},\n            opts: {\n                radius: 12,\n                width: 400,\n                height: 200,\n                container: null,\n                overlayHandler: function overlayHandler(data) {\n                    var popData = Object.assign({}, data);\n                    console.log(data);\n                    if (data.source) {\n                        popData.type = 'path';\n                        popData.disabled = data.target.data.stateClass.indexOf('is-disabled') > -1;\n                        var triggerEvents = data.source.data.targetEvents.filter(function (event) {\n                            return event.nextState === data.target.data.state;\n                        });\n                        popData.event = triggerEvents[0] && triggerEvents[0].event || {};\n                    } else {\n                        //node\n                        popData.type = 'node';\n                    }\n\n                    if (!popData.disabled) {\n                        self.popData = popData;\n                        self.$refs.popover.showPopper = true;\n                    }\n                }\n            }\n        };\n    },\n    mounted: function mounted() {\n        var style = getComputedStyle(this.$refs.wrapper);\n\n        this.opts.container = this.$refs.stateTree;\n        this.opts.width = parseInt(parseInt(style.width) * .8);\n        console.log(this.contract);\n        this.draw();\n    },\n\n    methods: {\n        updateContractState: function updateContractState(state) {\n            state.isProcess = true;\n            state.isActivated = true;\n        },\n        triggerLicense: function triggerLicense(data) {\n            return window.QI.fetch('//api.freelog.com/v1/contracts/signingLicenses', {\n                method: 'POST',\n                data: data\n            }).then(function (res) {\n                return res.json();\n            });\n        },\n        triggerContractState: function triggerContractState(data) {\n            return window.QI.fetch('//api.freelog.com/v1/contracts/test', {\n                method: 'POST',\n                data: data\n            }).then(function (res) {\n                return res.json();\n            });\n        },\n        activateContractHandler: function activateContractHandler(data) {\n            var self = this;\n            var contract = self.contract;\n            var contractId = contract.contractId;\n            var source = data.source.data;\n            var target = data.target.data;\n            var nextState = target.state;\n\n            var triggerEvents = source.targetEvents.filter(function (event) {\n                return event.nextState === nextState;\n            });\n\n            if (triggerEvents.length === 0) {\n                return self.$message.error('没有可触发的事件');\n            } else {\n                triggerEvents.forEach(function (trigger) {\n                    if (trigger.event.type === 'compoundEvents') {\n                        trigger.event.params.forEach(function (event) {\n                            triggerHandler(event);\n                        });\n                    } else {\n                        triggerHandler(trigger.event);\n                    }\n                });\n            }\n\n            function triggerHandler(event) {\n                var promise;\n                if (event.type === 'signing') {\n                    promise = self.triggerLicense({\n                        contractId: contractId,\n                        eventId: event.eventId,\n                        licenseIds: event.params\n                    });\n                } else {\n                    promise = self.triggerContractState({\n                        contractId: contractId,\n                        eventId: event.eventId\n                    });\n                }\n\n                Promise.resolve(promise).then(function (data) {\n                    if (data.ret === 0 && data.errcode === 0) {\n                        self.$message.success('操作成功');\n                        self.updateContractState(contract, nextState);\n                    } else {\n                        self.$message.error(data.msg);\n                    }\n                });\n            }\n        },\n        hidePopover: function hidePopover(event) {\n            if (['circle', 'path'].includes(event.target.nodeName) || this.$refs.popover.$el.contains(event.target)) {\n                event.stopPropagation();\n            } else {\n                this.$refs.popover.showPopper = false;\n            }\n        },\n        draw: function draw() {\n            if (!this.contract.contractId) {\n                return;\n            }\n            var result = parseContract(this.contract);\n            setTreeNodePosition(result, this.opts);\n            var resolveData = formatNodes(result.nodeList);\n            Object.assign(this.opts, resolveData);\n            new direct_graph(this.opts);\n        },\n        update: function update(data) {\n            this.contract = data;\n            this.draw();\n        }\n    }\n});\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pages/pagebuild/contract-state/index.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ var pagebuild_contract_state = (contract_state);\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41a1a5d4\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/pagebuild/contract-state/index.vue\nvar contract_state_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrapper\",staticClass:\"contract-state-wrap\",on:{\"click\":_vm.hidePopover}},[_c('el-popover',{ref:\"popover\",attrs:{\"popper-class\":\"tip js-svg-tip\",\"placement\":\"top\",\"trigger\":\"click\",\"width\":\"250\"}},[_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.popData.type == 'node'),expression:\"popData.type == 'node'\"}]},[_c('h3',[_vm._v(\"state:\"+_vm._s(_vm.popData.state))]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"isActiveState: \"+_vm._s(_vm.popData.isActive))]),_vm._v(\" \"),_c('li',[_vm._v(\"isProcess: \"+_vm._s(_vm.popData.isProcess))]),_vm._v(\" \"),_c('li',[_vm._v(\"isFinish: \"+_vm._s((_vm.popData.isFinish === undefined)? 'false': _vm.popData.isFinish))])])]),_vm._v(\" \"),(_vm.popData.type == 'path'&& _vm.popData.source)?_c('div',[_c('p',[_vm._v(\"event name: \"+_vm._s(_vm.popData.event.eventName))]),_vm._v(\" \"),_c('p',[_vm._v(\"from \"+_vm._s(_vm.popData.source.data.state)+\" to \"+_vm._s(_vm.popData.target.data.state))]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.activateContractHandler(_vm.popData)}}},[_vm._v(\"trigger\")])],1):_vm._e()])]),_vm._v(\" \"),_c('svg',{ref:\"stateTree\"})],1)}\nvar contract_state_staticRenderFns = []\nvar contract_state_esExports = { render: contract_state_render, staticRenderFns: contract_state_staticRenderFns }\n/* harmony default export */ var pages_pagebuild_contract_state = (contract_state_esExports);\n// CONCATENATED MODULE: ./src/pages/pagebuild/contract-state/index.vue\nfunction contract_state_injectStyle (ssrContext) {\n  __webpack_require__(\"GQ7r\")\n}\nvar contract_state_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar contract_state___vue_template_functional__ = false\n/* styles */\nvar contract_state___vue_styles__ = contract_state_injectStyle\n/* scopeId */\nvar contract_state___vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar contract_state___vue_module_identifier__ = null\nvar contract_state_Component = contract_state_normalizeComponent(\n  pagebuild_contract_state,\n  pages_pagebuild_contract_state,\n  contract_state___vue_template_functional__,\n  contract_state___vue_styles__,\n  contract_state___vue_scopeId__,\n  contract_state___vue_module_identifier__\n)\n\n/* harmony default export */ var src_pages_pagebuild_contract_state = (contract_state_Component.exports);\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pages/pagebuild/app.vue\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\nfunction importHtml(href) {\n    return new Promise(function (resolve, reject) {\n        var link = document.createElement('link');\n        link.onload = resolve;\n        link.onerror = reject;\n        link.rel = 'import';\n        link.href = href;\n        document.head.appendChild(link);\n    });\n}\n\n/* harmony default export */ var app = ({\n    data: function data() {\n        return {\n            policies: [],\n            contracts: [],\n            policyData: null,\n            contractData: null,\n            shouldShowAuthDialog: true,\n            contractStateData: {}\n        };\n    },\n\n    components: { ToolBar: src_components_toolbar, ContractState: src_pages_pagebuild_contract_state },\n    mounted: function mounted() {\n        var self = this;\n        var authInfo = window.__auth_info__;\n        var authErrorData = authInfo.__auth_error_info__ || {};\n\n        //统一监听服务，根据action进行分发执行器\n        window.addEventListener('freelogService', self.serviceDispatchHandler.bind(self), false);\n\n        this.checkAuthHandler(authErrorData.data || {}).then(function () {\n            self.$widgets = self.getWidgets();\n            self.loadWidgets();\n        });\n    },\n\n    methods: {\n        showAuthDialog: function showAuthDialog() {\n            this.shouldShowAuthDialog = true;\n        },\n        serviceDispatchHandler: function serviceDispatchHandler(event) {\n            var detail = event.detail;\n            var data = detail.data;\n            var action = detail.action;\n\n            if (this[action]) {\n                this[action](detail);\n            } else {\n                switch (action) {\n                    case 'authService':\n                        this.checkAuthHandler(data.data, data.msg);\n                        break;\n                    default:\n                        console.warn('没有定义的服务');\n                }\n            }\n        },\n        showPolicyDetailHandler: function showPolicyDetailHandler(policyData, index) {\n            this.$refs.policyTable.toggleRowExpansion(policyData, true);\n        },\n        showContractDetailHandler: function showContractDetailHandler(row, index) {\n            row.expanded = true;\n            this.$refs.contractTable.toggleRowExpansion(row, true);\n        },\n        signPolicyHandler: function signPolicyHandler(policyData, index) {\n            var self = this;\n            if (!policyData.selectedSegmentId) {\n                return this.$message.warning('没有选择策略');\n            }\n\n            //                console.log(policyData)\n\n            var tip = 'presentable name: ' + policyData.name + ', resource name: ' + policyData.tagInfo.resourceInfo.resourceName;\n            this.$confirm('\\u5408\\u540C\\u8BE6\\u60C5\\uFF1A' + tip + '\\u3002\\u786E\\u5B9A\\u7B7E\\u7EA6\\u5408\\u540C\\uFF1F', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                dangerouslyUseHTMLString: true,\n                type: 'warning'\n            }).then(function () {\n                window.QI.fetch('//api.freelog.com/v1/contracts', {\n                    method: 'POST',\n                    data: {\n                        contractType: 3,\n                        targetId: policyData.presentableId,\n                        segmentId: policyData.selectedSegmentId,\n                        serialNumber: policyData.serialNumber,\n                        partyTwo: window.__auth_info__.__auth_user_id__\n\n                    }\n                }).then(function (res) {\n                    return res.json();\n                }).then(function (data) {\n                    if (data.ret === 0 && data.errcode === 0) {\n                        self.policies.splice(index, 1);\n                        self.$message.success('签约成功');\n                        self.resolveContract({ contract: data.data });\n                    } else {\n                        self.$message.error(data.msg);\n                    }\n                });\n            }).catch(function () {\n                //取消\n            });\n        },\n        getWidgets: function getWidgets() {\n            var $page = document.querySelector('#js-page-container');\n            var $widgets = $page.querySelectorAll('.js-wc-widget');\n            return $widgets;\n        },\n        loadResourceDetail: function loadResourceDetail(resourceId) {\n            return window.QI.fetch('//api.freelog.com/v1/resources/' + resourceId).then(function (res) {\n                if (res.status === 200) {\n                    return res.json();\n                } else {\n                    return Promise.reject(res);\n                }\n            }).then(function (res) {\n                if (res.ret === 0 && res.errcode === 0) {\n                    return res.data;\n                } else {\n                    return Promise.reject(res);\n                }\n            });\n        },\n        loadContractDetail: function loadContractDetail(data) {\n            var self = this;\n            var contractData = data.contract;\n            this.loadResourceDetail(contractData.resourceId).then(function (resource) {\n                contractData.resourceDetail = resource;\n                self.contracts.push(contractData);\n            });\n        },\n        checkAuthHandler: function checkAuthHandler(authData, errorMsg) {\n            var _this = this;\n\n            var self = this;\n            return new Promise(function (resolve, reject) {\n                //如果有报错信息\n                if (authData && authData.authResult) {\n                    self.showAuthDialog();\n                    switch (authData.authResult.authErrorCode) {\n                        //未激活状态\n                        case 70080104:\n                            _this.loadContractDetail(authData.data);\n                            break;\n                        //未签约状态\n                        case 70080101:\n                            _this.loadPolicyDetail(authData.data);\n                            break;\n                        //节点与资源之间的合约授权失败\n                        case 70080202:\n                            console.log(errorMsg, authData.data);\n                            self.$message.warning(errorMsg);\n                            break;\n                        default:\n                            resolve();\n                            break;\n                    }\n                } else {\n                    resolve();\n                }\n            });\n        },\n        loadPolicyDetail: function loadPolicyDetail(authData) {\n            var self = this;\n            var presentableId = authData.presentableId;\n            var url = '//api.freelog.com/v1/presentables/' + presentableId;\n            window.QI.fetch(url).then(function (res) {\n                return res.json();\n            }).then(function (data) {\n                var policy = self.parsePolicy(data.data, presentableId);\n                policy.presentableId = presentableId;\n                self.policies.push(policy);\n                //                    console.log(policy)\n            });\n        },\n        parsePolicy: function parsePolicy(data) {\n            var self = this;\n            var policies = data;\n            var policyData = policies;\n            Object.assign(policyData, {\n                segments: [],\n                selectedSegmentId: ''\n            });\n            policies.policy.forEach(function (block) {\n                var segment = {\n                    detail: block,\n                    states: block.fsmDescription,\n                    selected: false\n                };\n\n                policyData.segments.push(segment);\n            });\n\n            return policyData;\n        },\n        loadWidgets: function loadWidgets() {\n            var self = this;\n            var $widgets = this.$widgets;\n            var url = '//api.freelog.com/v1/nodes/' + window.__auth_info__.__auth_node_id__ + '/presentables/';\n            Array.from($widgets).forEach(function (widget) {\n                var prensentableId = widget.getAttribute('data-widget-presentable-id');\n                if (prensentableId) {\n                    window.QI.fetchPresentable(prensentableId + '.data').then(function (res) {\n                        return res.text();\n                    }).then(function (data) {\n                        try {\n                            var result = JSON.parse(data);\n                            self.checkAuthHandler(result.data, result.msg);\n                        } catch (err) {\n                            //json解析不成功默认是成功情况,待优化\n                            var src = url + (prensentableId + '.data');\n                            importHtml(src);\n                        }\n                    });\n                } else {}\n            });\n        }\n    }\n});\n// CONCATENATED MODULE: ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b5041af\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/pagebuild/app.vue\nvar app_render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('tool-bar'),_vm._v(\" \"),_c('el-dialog',{attrs:{\"close-on-click-modal\":false,\"title\":\"签约\",\"visible\":_vm.shouldShowAuthDialog,\"fullscreen\":false,\"custom-class\":\"auth-dialog\",\"width\":\"50%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.shouldShowAuthDialog=$event}}},[_c('el-tabs',{attrs:{\"type\":\"border-card\",\"value\":\"contract\"}},[_c('el-tab-pane',{attrs:{\"label\":\"签约合同\"}},[_c('el-table',{ref:\"policyTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.policies,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('ul',_vm._l((scope.row.segments),function(segment){return _c('li',{staticClass:\"segment-row\"},[_c('span',{staticClass:\"segment-detail\"},[_vm._v(\"合同ID \"+_vm._s(segment.detail.segmentId))]),_vm._v(\" \"),_c('el-radio',{staticClass:\"select-btn\",attrs:{\"label\":segment.detail.segmentId},model:{value:(scope.row.selectedSegmentId),callback:function ($$v) {_vm.$set(scope.row, \"selectedSegmentId\", $$v)},expression:\"scope.row.selectedSegmentId\"}},[_vm._v(\"选择\\n                                    \")])],1)}))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"合同名称\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源名称\",\"prop\":\"tagInfo.resourceInfo.resourceName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源类型\",\"prop\":\"tagInfo.resourceInfo.resourceType\",\"width\":\"120px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!!scope.row.selectedSegmentId),expression:\"!!scope.row.selectedSegmentId\"}],attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.signPolicyHandler(scope.row, scope.$index)}}},[_vm._v(\"\\n                                签约\\n                            \")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!scope.row.selectedSegmentId),expression:\"!scope.row.selectedSegmentId\"}],attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.showPolicyDetailHandler(scope.row, scope.$index)}}},[_vm._v(\"\\n                                查看合同\\n                            \")])]}}])})],1)],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"合同管理\",\"name\":\"contract\"}},[_c('el-table',{ref:\"contractTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":\"\",\"data\":_vm.contracts}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('h3',{staticClass:\"contract-title\"},[_vm._v(\"合同流程\")]),_vm._v(\" \"),_c('contract-state',{staticClass:\"contract-state-chart\",attrs:{\"contract\":scope.row}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"合同ID\",\"prop\":\"contractId\",\"width\":\"240px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源名称\",\"prop\":\"resourceDetail.resourceName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源类型\",\"prop\":\"resourceDetail.resourceType\",\"width\":\"120px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.showContractDetailHandler(scope.row, scope.$index)}}},[_vm._v(\"\\n                                查看合同流程\\n                            \")])]}}])})],1)],1)],1)],1)],1)}\nvar app_staticRenderFns = []\nvar app_esExports = { render: app_render, staticRenderFns: app_staticRenderFns }\n/* harmony default export */ var pagebuild_app = (app_esExports);\n// CONCATENATED MODULE: ./src/pages/pagebuild/app.vue\nfunction app_injectStyle (ssrContext) {\n  __webpack_require__(\"x6GI\")\n}\nvar app_normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\nvar app___vue_template_functional__ = false\n/* styles */\nvar app___vue_styles__ = app_injectStyle\n/* scopeId */\nvar app___vue_scopeId__ = \"data-v-4b5041af\"\n/* moduleIdentifier (server only) */\nvar app___vue_module_identifier__ = null\nvar app_Component = app_normalizeComponent(\n  app,\n  pagebuild_app,\n  app___vue_template_functional__,\n  app___vue_styles__,\n  app___vue_scopeId__,\n  app___vue_module_identifier__\n)\n\n/* harmony default export */ var pages_pagebuild_app = (app_Component.exports);\n\n// CONCATENATED MODULE: ./src/pages/pagebuild/app.js\n\n\n\n\nwindow.QI = document.querySelector('.js-lib-qi');\n\nnew layout[\"a\" /* default */]({\n    el: '#app',\n    render: function render(h) {\n        return h(pages_pagebuild_app);\n    }\n});\n\n/***/ }),\n\n/***/ \"x6GI\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// removed by extract-text-webpack-plugin\n    if(false) {\n      // 1512461484287\n      var cssReload = require(\"../../../node_modules/css-hot-loader/hotModuleReplacement.js\")(module.id, {\"fileMap\":\"{fileName}\"});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  \n\n/***/ })\n\n},[\"XTzU\"]);\n\n\n// WEBPACK FOOTER //\n// pages/pagebuild.52ef8a582ba708c4d715.js","function injectStyle (ssrContext) {\n  require(\"!!css-hot-loader!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!style-loader!css-loader!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e3ced89c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!postcss-loader!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e3ced89c\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e3ced89c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbar/index.vue\n// module id = null\n// module chunks = ","//https://stackoverflow.com/questions/16058073/how-do-i-draw-a-graph-or-tree-structure-in-javascript\n//http://bl.ocks.org/rkirsling/5001347\n// https://bl.ocks.org/cjrd/6863459\n//https://bl.ocks.org/curran/5905182da50a4667dc00\n// https://bl.ocks.org/mbostock/1138500\nfunction DirectGraph(opts) {\n    opts = opts || {}\n    var width = opts.width || 960,\n        height = opts.height || 500,\n        colors = d3.scale.category10();\n    var Radius = opts.radius || 20;\n\n    var self = this;\n    var $svg;\n    var $container = (typeof opts.container === 'string') ? document.querySelector(opts.container) : opts.container;\n    this._opts = opts\n\n    if (opts.container) {\n        $svg = d3.select(opts.container)\n    } else {\n        $svg = d3.select(\"body\").append(\"svg\")\n    }\n    $svg.attr('width', width)\n        .attr('height', height);\n\n    var $tip = $container.parentNode.querySelector('.js-svg-tip')\n    if (!$tip) {\n        $tip = document.createElement('div')\n        $tip.classList.add('tip')\n        $container.parentNode.appendChild($tip)\n    }\n    var nodes = [];\n    var links = [];\n\n// init D3 force layout\n    var force = d3.layout.force()\n        .size([width, height])\n        .linkDistance(150)\n        .charge(-500)\n        .on('tick', tick)\n\n// define arrow markers for graph links\n    $svg.append('svg:defs').append('svg:marker')\n        .attr('id', 'end-arrow')\n        .attr('viewBox', '0 -5 10 10')\n        .attr('refX', 6)\n        .attr('markerWidth', 3)\n        .attr('markerHeight', 3)\n        .attr('orient', 'auto')\n        .append('svg:path')\n        .attr('d', 'M0,-5L10,0L0,5')\n        .attr('fill', '#000');\n\n    $svg.append('svg:defs').append('svg:marker')\n        .attr('id', 'start-arrow')\n        .attr('viewBox', '0 -5 10 10')\n        .attr('refX', 4)\n        .attr('markerWidth', 3)\n        .attr('markerHeight', 3)\n        .attr('orient', 'auto')\n        .append('svg:path')\n        .attr('d', 'M10,-5L0,0L10,5')\n        .attr('fill', '#000');\n\n    // handles to link and node element groups\n    var path = $svg.append('svg:g').selectAll('path'),\n        circle = $svg.append('svg:g').selectAll('g');\n\n// update force layout (called automatically each iteration)\n    function tick() {\n        // draw directed edges with proper padding from node centers\n        path.attr('d', function (d) {\n            var deltaX = d.target.x - d.source.x,\n                deltaY = d.target.y - d.source.y,\n                dist = Math.sqrt(deltaX * deltaX + deltaY * deltaY),\n                normX = deltaX / dist,\n                normY = deltaY / dist,\n                sourcePadding = d.left ? 17 : 12,\n                targetPadding = d.right ? 17 : 12,\n                sourceX = d.source.x + (sourcePadding * normX),\n                sourceY = d.source.y + (sourcePadding * normY),\n                targetX = d.target.x - (targetPadding * normX),\n                targetY = d.target.y - (targetPadding * normY);\n            return 'M' + sourceX + ',' + sourceY + 'L' + targetX + ',' + targetY;\n        });\n\n        circle.attr('transform', function (d) {\n            return 'translate(' + d.x + ',' + d.y + ')';\n        });\n    }\n\n    //selected变虚线\n    function restart() {\n        // path (link) group\n        path = path.data(links);\n\n        // update existing links\n        path.style('marker-start', function (d) {\n            return d.left ? 'url(#start-arrow)' : '';\n        }).style('marker-end', function (d) {\n            return d.right ? 'url(#end-arrow)' : '';\n        });\n\n\n        // add new links\n        path.enter().append('svg:path')\n            .attr('class', function (d) {\n                return d.target.data.stateClass + ' link'\n            })\n            .style('marker-start', function (d) {\n                return d.left ? 'url(#start-arrow)' : '';\n            })\n            .style('marker-end', function (d) {\n                return d.right ? 'url(#end-arrow)' : '';\n            })\n            .on('mouseenter', function (p) {\n                var src = p.source;\n                var target = p.target\n                var pos = d3.mouse(this)\n\n                $tip.style.opacity = 1\n                $tip.style.top = pos[1] + 'px'\n                $tip.style.left = pos[0] + 'px'\n                if (self._opts.overlayHandler) {\n                    self._opts.overlayHandler(p, $tip)\n                } else {\n                    $tip.innerHTML = JSON.stringify({\n                        source: src.data.state,\n                        target: target.data.state\n                    })\n                }\n            })\n\n        // remove old links\n        path.exit().remove();\n\n        // circle (node) group\n        // NB: the function arg is crucial here! nodes are known by id, not by index!\n        circle = circle.data(nodes, function (d) {\n            return d.id;\n        });\n\n        // update existing nodes (reflexive & selected visual states)\n        circle.selectAll('circle')\n            .classed('reflexive', function (d) {\n                return d.reflexive;\n            });\n        debugger\n        // add new nodes\n        var g = circle.enter().append('svg:g');\n        g.append('svg:circle')\n            .attr('class', function (d) {\n                return 'node ' + (d.data.stateClass || '')\n            })\n            .attr('r', Radius)\n            .on('mouseenter', function (d) {\n                $tip.style.opacity = 1\n                $tip.style.top = (d.y - Radius) + 'px'\n                $tip.style.left = (d.x + Radius * 1.5) + 'px'\n                if (self._opts.overlayHandler) {\n                    self._opts.overlayHandler(d.data, $tip)\n                } else {\n                    $tip.innerHTML = JSON.stringify(d.data)\n                }\n            })\n\n        // show node IDs\n        g.append('svg:text')\n            .attr('x', 0)\n            .attr('y', 4)\n            .attr('class', 'id')\n            .text(function (d) {\n                // return d.data.state\n                return d.id;\n            });\n\n        // remove old nodes\n        circle.exit().remove();\n\n        // set the graph in motion\n        force.start();\n    }\n\n    opts.nodes.forEach(function (node) {\n        nodes.push(node);\n        restart();\n    })\n\n    opts.links.forEach(function (link) {\n        links.push(link);\n        restart();\n    })\n    return this\n}\n\n\nexport default DirectGraph\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pagebuild/contract-state/direct-graph.js","import DirectGraph from './direct-graph'\n\nvar lastNodeId = -1;\n\nfunction createNode(props, data) {\n    var node = {id: ++lastNodeId, reflexive: false, data: data};\n    Object.assign(node, props)\n    return node\n}\n\n//创建渲染需要的数据结构\nfunction formatNodes(nodeList) {\n    var nodes = [];\n    var links = []\n    var nodeMap = {}\n\n    nodeList.forEach(function (nodeArr, index) {\n        nodeArr.forEach(function (node) {\n            node.stateClass = resolveStateClass(node)\n            var tmp = createNode(node.pos, node)\n\n            nodeMap[node.state] = tmp\n            nodes.push(tmp)\n        })\n    })\n\n    nodes.forEach(function (node) {\n        node.data.nextStates.forEach(function (next) {\n            links.push({\n                source: node,\n                target: nodeMap[next.state],\n                left: false,\n                right: true\n            })\n        })\n    })\n    return {nodes, links}\n}\n\n\n//生成d3 tree结构\nfunction generateRoot(stateTreeRoot) {\n    var node = {\n        name: stateTreeRoot.state,\n        children: []\n    }\n\n    stateTreeRoot.nextStates.forEach(function (next) {\n        node.children.push(generateRoot(next))\n    })\n\n    return node\n}\n\nfunction resolveStateClass(state) {\n    var stateCls = 'is-disabled'\n    if (state.isProcess) {\n        stateCls = 'is-process'\n    } else if (state.isFinish) {\n        stateCls = 'is-finish'\n    } else if (state.isWaiting) {\n        stateCls = 'is-wait'\n    }\n\n    if (state.isActive) {\n        stateCls += ' is-active'\n    }\n    return stateCls\n}\n\n//根据d3 tree生成的节点坐标设置force 节点的坐标\nfunction setTreeNodePosition(result, opts) {\n    var root = generateRoot(result.stateTreeRoot)\n    var height = opts.height;\n    var width = opts.width;\n    var tree = d3.layout.tree().size([height, width])\n    var nodes = tree.nodes(root)\n    nodes.forEach(function (node) {\n        var keys = ['depth', 'x', 'y']\n        var stateNode = result.stateMap[node.name]\n        if (stateNode) {\n            stateNode.pos = {}\n            keys.forEach(function (key) {\n                stateNode.pos[key] = node[key]\n            })\n            //将纵向变成横向\n            var x = stateNode.pos.x\n            stateNode.pos.x = stateNode.pos.y\n            stateNode.pos.y = x\n        }\n    })\n}\n\nfunction parseContract(contractData) {\n    var curState = contractData.fsmState\n    var policySegment = contractData.policySegment\n    var descs = policySegment.fsmDescription\n    var activatedStates = policySegment.activatedStates\n    var initialState = policySegment.initialState\n    var stateMap = {}\n    var stateTreeRoot;\n\n    function initStateNode(stateName) {\n        return {\n            nextStates: [],\n            targetEvents: [], //到下一状态可能的路径(事件)\n            state: stateName,\n            isActive: activatedStates.includes(stateName),\n            isProcess: stateName === curState,\n            deep: 0\n        };\n    }\n\n    var nodeList = [] //每层的节点列表\n\n    function walkTree(node) {\n        if (!nodeList[node.deep]) {\n            nodeList[node.deep] = []\n        }\n        nodeList[node.deep].push(node)\n\n        if (!node.nextStates.length) {\n            return\n        }\n\n        node.nextStates.forEach(function (nextNode) {\n            var nextStateNode = stateMap[nextNode.state]\n            nextStateNode.deep = node.deep + 1\n\n            if (node.isProcess || node.isWaiting) {\n                nextStateNode.isWaiting = true\n            }\n\n            if (nextStateNode.isProcess) {\n                node.isFinish = true\n            }\n\n            if (nextStateNode.targetEvents.length) {\n                nextStateNode.targetEvents.forEach(function (event) {\n                    if (stateMap[event.nextState] && event.nextState !== node.state) {\n                        nextStateNode.nextStates.push(stateMap[event.nextState])\n                    }\n                })\n            }\n            walkTree(nextStateNode)\n\n            if (nextStateNode.isFinish) {\n                node.isFinish = true\n            }\n        })\n    }\n\n    descs.forEach((desc) => {\n        var curStateNode = stateMap[desc.currentState] || initStateNode(desc.currentState)\n        var nextStateNode = stateMap[desc.nextState]\n\n        curStateNode.targetEvents.push(desc)\n\n        if (!nextStateNode) {\n            nextStateNode = initStateNode(desc.nextState);\n            stateMap[desc.nextState] = nextStateNode\n        }\n\n        //标记根节点的next，便于初始化遍历\n        if (desc.currentState === initialState) {\n            curStateNode.nextStates.push(nextStateNode)\n        }\n        stateMap[desc.currentState] = curStateNode\n    })\n\n    stateTreeRoot = stateMap[initialState]\n    walkTree(stateTreeRoot)\n\n    console.log(stateTreeRoot)\n\n    return {stateTreeRoot, stateMap, nodeList}\n}\n\nexport default {\n    name: 'contract-state',\n    props: {\n        contract: {\n            type: Object,\n            default() {\n                return null\n            }\n        }\n    },\n    data() {\n        var self = this;\n        return {\n            data: null,\n            popData: {},\n            opts: {\n                radius: 12,\n                width: 400,\n                height: 200,\n                container: null,\n                overlayHandler: function (data) {\n                    var popData = Object.assign({}, data)\n                    console.log(data)\n                    if (data.source) {\n                        popData.type = 'path'\n                        popData.disabled = data.target.data.stateClass.indexOf('is-disabled') > -1;\n                        var triggerEvents = data.source.data.targetEvents.filter((event) => {\n                            return event.nextState === data.target.data.state\n                        });\n                        popData.event = (triggerEvents[0] && triggerEvents[0].event) || {}\n                    } else { //node\n                        popData.type = 'node'\n                    }\n\n                    if (!popData.disabled) {\n                        self.popData = popData\n                        self.$refs.popover.showPopper = true\n                    }\n                }\n            }\n        }\n    },\n    mounted() {\n        var style = getComputedStyle(this.$refs.wrapper)\n\n        this.opts.container = this.$refs.stateTree;\n        this.opts.width = parseInt(parseInt(style.width) * .8)\n        console.log(this.contract)\n        this.draw()\n    },\n    methods: {\n        updateContractState(state) {\n            state.isProcess = true\n            state.isActivated = true;\n        },\n        triggerLicense(data) {\n            return window.QI.fetch('//api.freelog.com/v1/contracts/signingLicenses', {\n                method: 'POST',\n                data: data\n            }).then((res) => {\n                return res.json()\n            })\n        },\n        triggerContractState(data) {\n            return window.QI.fetch('//api.freelog.com/v1/contracts/test', {\n                method: 'POST',\n                data: data\n            }).then((res) => {\n                return res.json()\n            })\n        },\n        activateContractHandler(data) {\n            var self = this;\n            var contract = self.contract;\n            var contractId = contract.contractId\n            var source = data.source.data\n            var target = data.target.data\n            var nextState = target.state;\n\n            var triggerEvents = source.targetEvents.filter((event) => {\n                return event.nextState === nextState\n            })\n\n            if (triggerEvents.length === 0) {\n                return self.$message.error('没有可触发的事件')\n            } else {\n                triggerEvents.forEach((trigger) => {\n                    if (trigger.event.type === 'compoundEvents') {\n                        trigger.event.params.forEach((event) => {\n                            triggerHandler(event)\n                        })\n                    } else {\n                        triggerHandler(trigger.event)\n                    }\n                })\n            }\n\n            function triggerHandler(event) {\n                var promise;\n                if (event.type === 'signing') {\n                    promise = self.triggerLicense({\n                        contractId: contractId,\n                        eventId: event.eventId,\n                        licenseIds: event.params\n                    })\n                } else {\n                    promise = self.triggerContractState({\n                        contractId: contractId,\n                        eventId: event.eventId\n                    })\n                }\n\n                Promise.resolve(promise).then((data) => {\n                    if (data.ret === 0 && data.errcode === 0) {\n                        self.$message.success('操作成功');\n                        self.updateContractState(contract, nextState)\n                    } else {\n                        self.$message.error(data.msg)\n                    }\n                })\n            }\n        },\n        hidePopover(event) {\n            if (['circle', 'path'].includes(event.target.nodeName) || this.$refs.popover.$el.contains(event.target)) {\n                event.stopPropagation()\n            } else {\n                this.$refs.popover.showPopper = false\n            }\n        },\n        draw() {\n            if (!this.contract.contractId) {\n                return\n            }\n            var result = parseContract(this.contract)\n            setTreeNodePosition(result, this.opts)\n            var resolveData = formatNodes(result.nodeList)\n            Object.assign(this.opts, resolveData)\n            new DirectGraph(this.opts)\n        },\n        update(data) {\n            this.contract = data;\n            this.draw()\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pagebuild/contract-state/index.js","function injectStyle (ssrContext) {\n  require(\"!!css-hot-loader!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!style-loader!css-loader!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41a1a5d4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!postcss-loader!less-loader!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41a1a5d4\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/pagebuild/contract-state/index.vue\n// module id = null\n// module chunks = ","<template>\n    <div id=\"app\">\n        <tool-bar></tool-bar>\n        <el-dialog\n                :close-on-click-modal=\"false\"\n                title=\"签约\"\n                :visible.sync=\"shouldShowAuthDialog\"\n                :fullscreen=\"false\"\n                custom-class=\"auth-dialog\"\n                width=\"50%\"\n                center>\n            <el-tabs type=\"border-card\" value=\"contract\">\n                <el-tab-pane label=\"签约合同\">\n                    <el-table\n                            :data=\"policies\"\n                            ref=\"policyTable\"\n                            stripe\n                            style=\"width: 100%\">\n                        <el-table-column type=\"expand\">\n                            <template slot-scope=\"scope\">\n                                <ul>\n                                    <li v-for=\"segment in scope.row.segments\" class=\"segment-row\">\n                                        <span class=\"segment-detail\">合同ID {{segment.detail.segmentId}}</span>\n                                        <el-radio class=\"select-btn\" v-model=\"scope.row.selectedSegmentId\"\n                                                  :label=\"segment.detail.segmentId\">选择\n                                        </el-radio>\n                                    </li>\n                                </ul>\n                            </template>\n                        </el-table-column>\n                        <el-table-column\n                                label=\"合同名称\"\n                                prop=\"name\">\n                        </el-table-column>\n                        <el-table-column\n                                label=\"资源名称\"\n                                prop=\"tagInfo.resourceInfo.resourceName\">\n                        </el-table-column>\n                        <el-table-column\n                                label=\"资源类型\"\n                                prop=\"tagInfo.resourceInfo.resourceType\"\n                                width=\"120px\">\n                        </el-table-column>\n                        <el-table-column label=\"操作\" align=\"center\" width=\"120px\">\n                            <template slot-scope=\"scope\">\n                                <el-button\n                                        size=\"mini\"\n                                        @click=\"signPolicyHandler(scope.row, scope.$index)\"\n                                        v-show=\"!!scope.row.selectedSegmentId\">\n                                    签约\n                                </el-button>\n                                <el-button\n                                        v-show=\"!scope.row.selectedSegmentId\"\n                                        size=\"mini\"\n                                        @click=\"showPolicyDetailHandler(scope.row, scope.$index)\">\n                                    查看合同\n                                </el-button>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </el-tab-pane>\n                <el-tab-pane label=\"合同管理\" name=\"contract\">\n                    <el-table\n                            stripe\n                            :data=\"contracts\"\n                            ref=\"contractTable\"\n                            style=\"width: 100%\">\n                        <el-table-column type=\"expand\">\n                            <template slot-scope=\"scope\">\n                                <h3 class=\"contract-title\">合同流程</h3>\n                                <contract-state class=\"contract-state-chart\" :contract=\"scope.row\"></contract-state>\n                            </template>\n                        </el-table-column>\n                        <el-table-column\n                                label=\"合同ID\"\n                                prop=\"contractId\"\n                                width=\"240px\">\n                        </el-table-column>\n                        <el-table-column\n                                label=\"资源名称\"\n                                prop=\"resourceDetail.resourceName\">\n                        </el-table-column>\n                        <el-table-column\n                                label=\"资源类型\"\n                                prop=\"resourceDetail.resourceType\"\n                                width=\"120px\">\n                        </el-table-column>\n                        <el-table-column label=\"操作\" align=\"center\" width=\"150px\">\n                            <template slot-scope=\"scope\">\n                                <!--v-show=\"!scope.row.expanded\"-->\n                                <el-button\n                                        size=\"mini\"\n                                        @click=\"showContractDetailHandler(scope.row, scope.$index)\">\n                                    查看合同流程\n                                </el-button>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </el-tab-pane>\n            </el-tabs>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    import ToolBar from '@/components/toolbar/index.vue'\n    import ContractState from './contract-state/index.vue'\n\n    function importHtml(href) {\n        return new Promise(function (resolve, reject) {\n            const link = document.createElement('link');\n            link.onload = resolve;\n            link.onerror = reject;\n            link.rel = 'import';\n            link.href = href;\n            document.head.appendChild(link);\n        });\n    }\n\n    export default {\n        data() {\n            return {\n                policies: [],\n                contracts: [],\n                policyData: null,\n                contractData: null,\n                shouldShowAuthDialog: true,\n                contractStateData: {}\n            }\n        },\n        components: {ToolBar, ContractState},\n        mounted() {\n            var self = this\n            var authInfo = window.__auth_info__;\n            var authErrorData = authInfo.__auth_error_info__ || {}\n\n\n            //统一监听服务，根据action进行分发执行器\n            window.addEventListener('freelogService', self.serviceDispatchHandler.bind(self), false)\n\n            this.checkAuthHandler(authErrorData.data || {})\n                .then(() => {\n                    self.$widgets = self.getWidgets()\n                    self.loadWidgets()\n                })\n        },\n        methods: {\n            showAuthDialog() {\n                this.shouldShowAuthDialog = true;\n            },\n            serviceDispatchHandler(event) {\n                var detail = event.detail;\n                var data = detail.data;\n                var action = detail.action\n\n                if (this[action]) {\n                    this[action](detail)\n                } else {\n                    switch (action) {\n                        case 'authService':\n                            this.checkAuthHandler(data.data, data.msg)\n                            break;\n                        default:\n                            console.warn('没有定义的服务');\n                    }\n                }\n            },\n            showPolicyDetailHandler(policyData, index) {\n                this.$refs.policyTable.toggleRowExpansion(policyData, true)\n            },\n            showContractDetailHandler(row, index) {\n                row.expanded = true\n                this.$refs.contractTable.toggleRowExpansion(row, true)\n            },\n            signPolicyHandler(policyData, index) {\n                var self = this;\n                if (!policyData.selectedSegmentId) {\n                    return this.$message.warning('没有选择策略')\n                }\n\n//                console.log(policyData)\n\n                var tip = `presentable name: ${policyData.name}, resource name: ${policyData.tagInfo.resourceInfo.resourceName}`\n                this.$confirm(`合同详情：${tip}。确定签约合同？`, '提示', {\n                    confirmButtonText: '确定',\n                    cancelButtonText: '取消',\n                    dangerouslyUseHTMLString: true,\n                    type: 'warning'\n                }).then(() => {\n                    window.QI.fetch('//api.freelog.com/v1/contracts', {\n                        method: 'POST',\n                        data: {\n                            contractType: 3,\n                            targetId: policyData.presentableId,\n                            segmentId: policyData.selectedSegmentId,\n                            serialNumber: policyData.serialNumber,\n                            partyTwo: window.__auth_info__.__auth_user_id__\n\n                        }\n                    }).then((res) => {\n                        return res.json()\n                    }).then((data) => {\n                        if (data.ret === 0 && data.errcode === 0) {\n                            self.policies.splice(index, 1)\n                            self.$message.success('签约成功')\n                            self.resolveContract({contract: data.data})\n                        } else {\n                            self.$message.error(data.msg)\n                        }\n                    })\n                }).catch(() => {\n                    //取消\n                });\n            },\n            getWidgets() {\n                var $page = document.querySelector('#js-page-container')\n                var $widgets = $page.querySelectorAll('.js-wc-widget');\n                return $widgets\n            },\n            loadResourceDetail(resourceId) {\n                return window.QI.fetch(`//api.freelog.com/v1/resources/${resourceId}`).then((res) => {\n                    if (res.status === 200) {\n                        return res.json()\n                    } else {\n                        return Promise.reject(res)\n                    }\n                }).then((res) => {\n                    if (res.ret === 0 && res.errcode === 0) {\n                        return res.data\n                    } else {\n                        return Promise.reject(res)\n                    }\n                })\n            },\n            loadContractDetail(data) {\n                var self = this;\n                var contractData = data.contract\n                this.loadResourceDetail(contractData.resourceId)\n                    .then((resource) => {\n                        contractData.resourceDetail = resource\n                        self.contracts.push(contractData)\n                    })\n            },\n            checkAuthHandler(authData, errorMsg) {\n                var self = this;\n                return new Promise((resolve, reject) => {\n                    //如果有报错信息\n                    if (authData && authData.authResult) {\n                        self.showAuthDialog()\n                        switch (authData.authResult.authErrorCode) {\n                            //未激活状态\n                            case 70080104:\n                                this.loadContractDetail(authData.data);\n                                break;\n                            //未签约状态\n                            case 70080101:\n                                this.loadPolicyDetail(authData.data);\n                                break;\n                            //节点与资源之间的合约授权失败\n                            case 70080202:\n                                console.log(errorMsg, authData.data)\n                                self.$message.warning(errorMsg)\n                                break;\n                            default:\n                                resolve();\n                                break;\n                        }\n                    } else {\n                        resolve()\n                    }\n                })\n            },\n            loadPolicyDetail(authData) {\n                var self = this\n                var presentableId = authData.presentableId;\n                var url = '//api.freelog.com/v1/presentables/' + presentableId;\n                window.QI.fetch(url).then(function (res) {\n                    return res.json();\n                }).then(function (data) {\n                    var policy = self.parsePolicy(data.data, presentableId)\n                    policy.presentableId = presentableId\n                    self.policies.push(policy)\n//                    console.log(policy)\n                })\n            },\n            parsePolicy(data) {\n                var self = this;\n                var policies = data;\n                var policyData = policies;\n                Object.assign(policyData, {\n                    segments: [],\n                    selectedSegmentId: ''\n                })\n                policies.policy.forEach(function (block) {\n                    var segment = {\n                        detail: block,\n                        states: block.fsmDescription,\n                        selected: false\n                    }\n\n                    policyData.segments.push(segment)\n                })\n\n\n                return policyData\n            },\n            loadWidgets() {\n                var self = this;\n                var $widgets = this.$widgets\n                var url = `//api.freelog.com/v1/nodes/${window.__auth_info__.__auth_node_id__}/presentables/`\n                Array.from($widgets).forEach(function (widget) {\n                    var prensentableId = widget.getAttribute('data-widget-presentable-id');\n                    if (prensentableId) {\n                        window.QI.fetchPresentable(`${prensentableId}.data`)\n                            .then((res) => {\n                                return res.text()\n                            }).then(function (data) {\n                            try {\n                                var result = JSON.parse(data)\n                                self.checkAuthHandler(result.data, result.msg)\n                            } catch (err) {\n                                //json解析不成功默认是成功情况,待优化\n                                var src = url + `${prensentableId}.data`;\n                                importHtml(src)\n                            }\n                        })\n                    } else {\n\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n    @import \"./app.less\";\n\n    .contract-state-chart {\n\n    }\n\n    .event-state {\n        padding: 5px;\n        font-size: 16px;\n    }\n\n    .current-state {\n        color: #35b5ff;\n    }\n\n    .policy-wrap {\n        text-align: center;\n    }\n\n    .active-state {\n        color: #67C23A;\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/pagebuild/app.vue","function injectStyle (ssrContext) {\n  require(\"!!css-hot-loader!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!style-loader!css-loader!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b5041af\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!postcss-loader!less-loader!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./app.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b5041af\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./app.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b5041af\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/pagebuild/app.vue\n// module id = null\n// module chunks = ","export default {\n    name: 'tool-bar',\n    data(){\n        return {\n\n        }\n    },\n    mounted(){\n\n    },\n    methods: {\n        showAuthDialog(){\n            var event = new CustomEvent('freelogService', {detail: {\n                action: 'showAuthDialog'\n            }});\n            window.dispatchEvent(event)\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/toolbar/index.js","<template>\n    <ul class=\"tool-bar-wrap\">\n        <li class=\"user-tab\" title=\"个人中心\"><a href=\"/pages/user/index.html\" target=\"_blank\"><i class=\"el-icon-fa-user\" aria-hidden=\"true\"></i></a></li>\n        <li class=\"contract-tab\" @click=\"showAuthDialog\" title=\"合同管理\"><i class=\"el-icon-document\"></i></li>\n    </ul>\n</template>\n\n<script>\n    import ToolBar from './index'\n    export default ToolBar\n</script>\n\n<style lang=\"less\" scoped>\n@import \"index.less\";\n\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/toolbar/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"tool-bar-wrap\"},[_vm._m(0,false,false),_vm._v(\" \"),_c('li',{staticClass:\"contract-tab\",attrs:{\"title\":\"合同管理\"},on:{\"click\":_vm.showAuthDialog}},[_c('i',{staticClass:\"el-icon-document\"})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"user-tab\",attrs:{\"title\":\"个人中心\"}},[_c('a',{attrs:{\"href\":\"/pages/user/index.html\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-fa-user\",attrs:{\"aria-hidden\":\"true\"}})])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e3ced89c\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbar/index.vue\n// module id = null\n// module chunks = ","<template>\n    <div class=\"contract-state-wrap\" ref=\"wrapper\" @click=\"hidePopover\">\n        <el-popover\n                ref=\"popover\"\n                popper-class=\"tip js-svg-tip\"\n                placement=\"top\"\n                trigger=\"click\"\n                width=\"250\">\n            <div>\n                <div v-show=\"popData.type == 'node'\">\n                    <h3>state:{{popData.state}}</h3>\n                    <ul>\n                        <li>isActiveState: {{popData.isActive}}</li>\n                        <li>isProcess: {{popData.isProcess}}</li>\n                        <li>isFinish: {{(popData.isFinish === undefined)? 'false': popData.isFinish}}</li>\n                    </ul>\n                </div>\n                <div v-if=\"popData.type == 'path'&& popData.source\">\n                    <p>event name: {{popData.event.eventName}}</p>\n                    <p>from {{popData.source.data.state}} to {{popData.target.data.state}}</p>\n                    <el-button size=\"mini\" @click=\"activateContractHandler(popData)\">trigger</el-button>\n                </div>\n            </div>\n        </el-popover>\n\n        <svg ref=\"stateTree\"></svg>\n    </div>\n</template>\n\n<script>\n    import ContractState from './index'\n\n    export default ContractState\n</script>\n\n<style lang=\"less\">\n    @import \"index.less\";\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/pagebuild/contract-state/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"wrapper\",staticClass:\"contract-state-wrap\",on:{\"click\":_vm.hidePopover}},[_c('el-popover',{ref:\"popover\",attrs:{\"popper-class\":\"tip js-svg-tip\",\"placement\":\"top\",\"trigger\":\"click\",\"width\":\"250\"}},[_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.popData.type == 'node'),expression:\"popData.type == 'node'\"}]},[_c('h3',[_vm._v(\"state:\"+_vm._s(_vm.popData.state))]),_vm._v(\" \"),_c('ul',[_c('li',[_vm._v(\"isActiveState: \"+_vm._s(_vm.popData.isActive))]),_vm._v(\" \"),_c('li',[_vm._v(\"isProcess: \"+_vm._s(_vm.popData.isProcess))]),_vm._v(\" \"),_c('li',[_vm._v(\"isFinish: \"+_vm._s((_vm.popData.isFinish === undefined)? 'false': _vm.popData.isFinish))])])]),_vm._v(\" \"),(_vm.popData.type == 'path'&& _vm.popData.source)?_c('div',[_c('p',[_vm._v(\"event name: \"+_vm._s(_vm.popData.event.eventName))]),_vm._v(\" \"),_c('p',[_vm._v(\"from \"+_vm._s(_vm.popData.source.data.state)+\" to \"+_vm._s(_vm.popData.target.data.state))]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.activateContractHandler(_vm.popData)}}},[_vm._v(\"trigger\")])],1):_vm._e()])]),_vm._v(\" \"),_c('svg',{ref:\"stateTree\"})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41a1a5d4\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/pagebuild/contract-state/index.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('tool-bar'),_vm._v(\" \"),_c('el-dialog',{attrs:{\"close-on-click-modal\":false,\"title\":\"签约\",\"visible\":_vm.shouldShowAuthDialog,\"fullscreen\":false,\"custom-class\":\"auth-dialog\",\"width\":\"50%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.shouldShowAuthDialog=$event}}},[_c('el-tabs',{attrs:{\"type\":\"border-card\",\"value\":\"contract\"}},[_c('el-tab-pane',{attrs:{\"label\":\"签约合同\"}},[_c('el-table',{ref:\"policyTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.policies,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('ul',_vm._l((scope.row.segments),function(segment){return _c('li',{staticClass:\"segment-row\"},[_c('span',{staticClass:\"segment-detail\"},[_vm._v(\"合同ID \"+_vm._s(segment.detail.segmentId))]),_vm._v(\" \"),_c('el-radio',{staticClass:\"select-btn\",attrs:{\"label\":segment.detail.segmentId},model:{value:(scope.row.selectedSegmentId),callback:function ($$v) {_vm.$set(scope.row, \"selectedSegmentId\", $$v)},expression:\"scope.row.selectedSegmentId\"}},[_vm._v(\"选择\\n                                    \")])],1)}))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"合同名称\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源名称\",\"prop\":\"tagInfo.resourceInfo.resourceName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源类型\",\"prop\":\"tagInfo.resourceInfo.resourceType\",\"width\":\"120px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"120px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!!scope.row.selectedSegmentId),expression:\"!!scope.row.selectedSegmentId\"}],attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.signPolicyHandler(scope.row, scope.$index)}}},[_vm._v(\"\\n                                签约\\n                            \")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!scope.row.selectedSegmentId),expression:\"!scope.row.selectedSegmentId\"}],attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.showPolicyDetailHandler(scope.row, scope.$index)}}},[_vm._v(\"\\n                                查看合同\\n                            \")])]}}])})],1)],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"合同管理\",\"name\":\"contract\"}},[_c('el-table',{ref:\"contractTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"stripe\":\"\",\"data\":_vm.contracts}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('h3',{staticClass:\"contract-title\"},[_vm._v(\"合同流程\")]),_vm._v(\" \"),_c('contract-state',{staticClass:\"contract-state-chart\",attrs:{\"contract\":scope.row}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"合同ID\",\"prop\":\"contractId\",\"width\":\"240px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源名称\",\"prop\":\"resourceDetail.resourceName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"资源类型\",\"prop\":\"resourceDetail.resourceType\",\"width\":\"120px\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.showContractDetailHandler(scope.row, scope.$index)}}},[_vm._v(\"\\n                                查看合同流程\\n                            \")])]}}])})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b5041af\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/pagebuild/app.vue\n// module id = null\n// module chunks = ","import Vue from '@/layout'\n\nimport App from './app.vue'\n\nwindow.QI = document.querySelector('.js-lib-qi');\n\nnew Vue({\n    el: '#app',\n    render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pagebuild/app.js"],"sourceRoot":""}