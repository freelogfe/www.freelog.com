webpackJsonp([2],{"6UCX":function(t,e,n){"use strict";function a(t){n("X1Pb")}var o=n("G3VR"),s=n("HkHh"),r=n("kEHT"),c={data:function(){return{user:r.a.get("userInfo")||{}}},mounted:function(){},components:{NavTopBar:s.a},methods:{}},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-top-bar"),t._v(" "),n("el-container",{staticClass:"app-container"},[t.user?n("el-header",{staticClass:"header"},[n("div",{staticClass:"banner-portrait inline"},[n("a",{attrs:{href:"/pages/user/index.html"}},[n("img",{staticClass:"portrait-img",attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRb_dez7L9rZGrxliWIWRzbH6H0u0BMePCrTB6wVbLtcfrAMKII",alt:""}})])]),t._v(" "),n("div",{staticClass:"banner-main  inline"},[n("div",{staticClass:"banner-main-hello"},[n("p",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))])]),t._v(" "),n("div",{staticClass:"banner-main-detail"},[n("div",{staticClass:"user-account inline"},[n("label",[t._v("账户： ")]),t._v(t._s(t.user.mobile||t.user.email))]),t._v(" "),n("i",{staticClass:"split-line"},[t._v("|")]),t._v(" "),n("div",{staticClass:"update-date inline"},[t._v(t._s(t._f("fmtDate")(t.user.updateDate)))])])])]):t._e(),t._v(" "),n("el-main",{staticStyle:{background:"white"}},[n("div",{attrs:{id:"main-app"}})])],1)],1)},l=[],d={render:i,staticRenderFns:l},u=d,f=n("VU/8"),m=a,p=f(c,u,!1,m,null,null),v=p.exports;new o.a({el:"#app",render:function(t){return t(v)}});e.a=o.a},"7xrK":function(t,e,n){"use strict";function a(t){n("Vvxu")}function o(t){n("GQ8f")}function s(t){n("Af01")}function r(t){n("VsBH")}Object.defineProperty(e,"__esModule",{value:!0});var c=n("6UCX"),i=n("nEJd"),l=n("HkHh"),d=n("aIHY"),u={name:"clip-board",data:function(){return{}},props:{value:String},mounted:function(){console.log(this.value)},methods:{copyHandler:function(){console.log("copy"),this.$refs.copyText.select();try{var t=document.execCommand("copy");this.$emit("copyDone",t)}catch(t){this.$emit("copyDone",!1)}}}},f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.copyHandler}},[n("textarea",{ref:"copyText",staticClass:"clip-text",domProps:{value:t.value}}),t._v(" "),t._t("default")],2)},m=[],p={render:f,staticRenderFns:m},v=p,h=n("VU/8"),_=a,g=h(u,v,!1,_,"data-v-eaf1796a",null),w=g.exports,y={name:"account-list",data:function(){return{cardStyle:{padding:"5px","min-height":"150px",display:"flex","justify-content":"center","align-items":"center","flex-wrap":"wrap"},accounts:[]}},components:{ClipBoard:w},mounted:function(){var t=this;this.loadAssets().then(this.formatAssets.bind(this)).then(function(e){t.accounts=e})},methods:{handleCommand:function(t){switch(t.type){case"detail":this.viewAccountDetail(t.data);break;case"download":this.downloadKeyStore(t.data.cardNo);break;case"clear":this.clearKeyStore(t.data.cardNo);break;case"pay":this.gotoPayHandler(t.data)}},viewAccountDetail:function(t){location.href="/pages/account/detail.html?accountId="+t.accountId},gotoPayHandler:function(t){location.href="/pages/transfer.html?fromAccountId="+t.accountId},downloadFile:function(t,e){var n=document.createElement("a"),a=new Blob([e]);n.download=t,n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),n.remove()},downloadKeyStore:function(t){var e=this;return this.$axios.get("//api.freelog.com/v1/pay/accounts/downLoadKeyStore",{params:{address:t}}).then(function(n){try{var a=new Blob([JSON.stringify(n.data,null,2)],{type:"application/json"});e.downloadFile(t,a)}catch(t){e.$message.error(t)}}).catch(function(t){console.log(t)})},clearKeyStore:function(t){var e=this;this.$confirm("确定清除服务器上的keystore文件？").then(function(n){return e.$axios.get("//api.freelog.com/v1/pay/accounts/clearKeyStore",{params:{address:t}}).then(function(t){console.log(t.data);var n=t.data;0===n.ret&&0===n.errcode?e.$message.success("成功清除"):e.$message.error(n.msg)}).catch(function(t){console.log(t)})}).catch(function(t){})},formatAssets:function(t){return console.log(t),t.forEach(function(t){t.showDetail=d.a[t.accountType]}),t},copyDoneHandler:function(t){t?this.$message.success("复制成功"):this.$message.error("复制失败")},loadAssets:function(){return this.$axios.get("//api.freelog.com/v1/pay/accounts").then(function(t){return t.data.data}).catch(function(t){console.log(t)})}}},b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"assets-wrap"},[n("el-row",[t._l(t.accounts,function(e,a){return n("el-col",{key:a,attrs:{span:6}},[n("el-card",{staticClass:"account-card",attrs:{"body-style":t.cardStyle}},[n("p",{staticClass:"account-card-info"},[n("label",[t._v("币种")]),t._v("\n          "+t._s(e.showDetail.name))]),t._v(" "),n("p",{staticClass:"account-card-info"},[n("label",[t._v("账户地址")]),t._v(" "),e.accountId?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.accountId,placement:"top"}},[n("clip-board",{on:{copyDone:t.copyDoneHandler},model:{value:e.accountId,callback:function(n){t.$set(e,"accountId",n)},expression:"account.accountId"}},[n("a",{attrs:{href:"javascript:;"}},[n("i",{staticClass:"el-icon-fa-clipboard"})])])],1):n("span",[t._v("账户不存在")])],1),t._v(" "),n("p",{staticClass:"account-card-info"},[n("label",[t._v("账户余额")]),n("span",[t._v(t._s(t._f("humanizeCurrency")(e.balance))+" "+t._s(e.showDetail.abbr))])]),t._v(" "),1===e.status?n("p",{staticClass:"account-card-info"},[n("el-dropdown",{on:{command:t.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                                          账户操作"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{type:"detail",data:e}}},[t._v("\n                详情\n              ")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{type:"pay",data:e}}},[t._v("\n                去转账\n              ")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{type:"download",data:e}}},[t._v("下载keystore\n              ")]),t._v(" "),n("el-dropdown-item",{attrs:{command:{type:"clear",data:e}}},[t._v("清除下载keystore\n              ")])],1)],1)],1):t._e()])],1)}),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-card",{staticClass:"account-card",attrs:{"body-style":t.cardStyle}},[n("a",{staticClass:"add-account-btn",attrs:{href:"/pages/account/create.html"}},[n("p",[n("i",{staticClass:"el-icon-plus"})]),t._v(" "),n("p",[t._v("添加账户")])])])],1)],2)],1)},C=[],x={render:b,staticRenderFns:C},k=x,I=n("VU/8"),$=o,H=I(y,k,!1,$,"data-v-1bbee0d8",null),D=H.exports,S=n("kEHT"),E=n("kIFb"),R={name:"contract-list",data:function(){return{contracts:[]}},mounted:function(){var t=this;this.loadContracts().then(this.loadResourcesDetail.bind(this)).then(this.format.bind(this)).then(function(e){t.contracts=e})},methods:{format:function(t){var e=[];return t.forEach(function(t){t.resourceDetail&&(t._status={type:E.b[t.status],text:E.c[t.status]},e.push(t))}),e},viewDetailHandler:function(){this.$message.info("开发中")},loadResource:function(t){var e=this;return new Promise(function(n){e.$axios.get("/v1/resources/"+t).then(function(t){n(0===t.data.errcode?t.data.data:null)}).catch(function(){n(null)})})},loadResourcesDetail:function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.loadResource(t.resourceId))}),Promise.all(n).then(function(e){var n={};return e.forEach(function(t){t&&(n[t.resourceId]=t)}),t.forEach(function(t){t.resourceDetail=n[t.resourceId]||null}),t})},loadContracts:function(){var t=S.a.get("userInfo");return this.$axios.get("/v1/contracts",{params:{contractType:3,partyTwo:t.userId}}).then(function(t){if(0===t.data.errcode){var e=t.data.data;return e&&e.dataList||[]}throw new Error(t.data.msg)}).catch(function(t){console.log(t)})}}},A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contracts-wrap"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.contracts}},[n("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",[t._v(t._s(t._f("fmtDate")(e.row.createDate)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"resourceDetail.resourceName",label:"资源名",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"resourceDetail.resourceType",label:"资源类型",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"address",label:"合同状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:e.row._status.type}},[t._v(t._s(e.row._status.text))])]}}])}),t._v(" "),n("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{attrs:{"split-button":"",type:"primary"},on:{click:t.viewDetailHandler}},[t._v("\n          详情\n          "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[t._v("操作1")]),t._v(" "),n("el-dropdown-item",[t._v("操作2")]),t._v(" "),n("el-dropdown-item",[t._v("操作3")])],1)],1)]}}])})],1)],1)},T=[],U={render:A,staticRenderFns:T},V=U,B=n("VU/8"),F=s,L=B(R,V,!1,F,"data-v-3722ee18",null),N=L.exports,K={data:function(){return{}},mounted:function(){},components:{UserNavBar:i.a,NavTopBar:l.a,AccountList:D,ContractList:N},methods:{loadUserInfo:function(){var t=this;window.fetch("//api.freelog.com/v1/userinfos/10024",{credentials:"same-origin"}).then(function(t){return t.json()}).then(function(e){t.user=e.data})}}},P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"main-content"},[n("el-main",[n("account-list"),t._v(" "),n("div",{staticClass:"main-content"},[n("el-menu",{attrs:{"default-active":"1",mode:"horizontal"}},[n("el-menu-item",{attrs:{index:"1"}},[t._v("已购买资源")])],1),t._v(" "),n("div",{staticClass:"contentBody"},[n("contract-list")],1)],1)],1)],1)])},j=[],z={render:P,staticRenderFns:j},G=z,J=n("VU/8"),X=r,M=J(K,G,!1,X,"data-v-c822934e",null),O=M.exports;new c.a({el:"#main-app",render:function(t){return t(O)}})},Af01:function(t,e,n){},GQ8f:function(t,e,n){},HkHh:function(t,e,n){"use strict";function a(t){n("edu7")}var o=n("kEHT"),s={name:"nav-top-bar",data:function(){return{user:o.a.get("userInfo")||{}}},mounted:function(){this.checkLoginStatus()},methods:{checkLoginStatus:function(){this.user.userId||location.replace("/pages/user/login.html")},logoutHandler:function(){this.$axios.get("//api.freelog.com/v1/passport/logout").then(function(t){o.a.remove("userInfo"),location.replace("/pages/user/login.html")})},handleNavTopCommand:function(t){switch(t){case"gotoAccountSetting":location.href="/pages/account/security.html"}}}},r=s,c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav-top-wrapper"},[t.user?n("div",{staticClass:"nav-top-container"},[n("ul",{staticClass:"nav-top-right"},[n("li",{staticClass:"nav-top-item"},[n("el-dropdown",{on:{command:t.handleNavTopCommand}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                      "+t._s(t.user.nickname)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"gotoAccountSetting"}},[t._v("账户设置")])],1)],1)],1),t._v(" "),n("li",{staticClass:"nav-top-item",on:{click:t.logoutHandler}},[t._v("退出")]),t._v(" "),t._m(0)])]):t._e()])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"nav-top-item"},[n("a",{attrs:{href:"/pages/user/index.html"}},[t._v("我的feth")])])}],l={render:c,staticRenderFns:i},d=l,u=n("VU/8"),f=a,m=u(r,d,!1,f,"data-v-0f5da88c",null);e.a=m.exports},UAmh:function(t,e,n){},VsBH:function(t,e,n){},Vvxu:function(t,e,n){},X1Pb:function(t,e,n){},edu7:function(t,e,n){},kIFb:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s});var a={uncreated:-1,initial:1,running:2,activated:3,userTerminated:4,sysTerminated:5,terminated:6,invalid:0},o={0:"资源未生效","-1":"未创建合同",1:"未开始执行",2:"执行中",3:"生效中",4:"用户终止",5:"系统终止",6:"合同已终止"},s={0:"info","-1":"warning",1:"",2:"",3:"success",4:"info",5:"info",6:"info"}},nEJd:function(t,e,n){"use strict";function a(t){n("UAmh")}var o={1:"/pages/user/index.html",3:"/pages/favorites.html",4:"/pages/userResource.html",5:"/pages/account.html"},s={name:"user-nav-bar",data:function(){return{}},props:["index"],computed:{activeIndex:function(){return this.index?this.index:"1"}},mounted:function(){},methods:{handleSelect:function(t){window.location.assign(o[t])}}},r=s,c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.index,mode:"horizontal"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"1"}},[t._v("最近浏览节点")]),t._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[t._v("我的工作台")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-1"}},[t._v("选项1")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-2"}},[t._v("选项2")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-3"}},[t._v("选项3")])],2),t._v(" "),n("el-menu-item",{attrs:{index:"3"}},[t._v("收藏夹")]),t._v(" "),n("el-menu-item",{attrs:{index:"4"}},[t._v("已购买资源")]),t._v(" "),n("el-menu-item",{attrs:{index:"5"}},[t._v("账户管理")])],1)},i=[],l={render:c,staticRenderFns:i},d=l,u=n("VU/8"),f=a,m=u(r,d,!1,f,"data-v-69bc6505",null);e.a=m.exports}},["7xrK"]);
//# sourceMappingURL=index.js.map