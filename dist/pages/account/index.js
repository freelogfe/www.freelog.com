webpackJsonp([7],{"8Qhf":function(t,n,e){"use strict";var i=e("fnIZ"),s=e("HkHh"),a=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var e=[],i=!0,s=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done)&&(e.push(o.value),!n||e.length!==n);i=!0);}catch(t){s=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw a}}return e}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o={data:function(){return{activeIndex:"0",routerMap:{0:"/pages/account/index.html",1:"/pages/account/security.html"}}},mounted:function(){this.initDefaultAcitve()},components:{NavTopBar:s.a},methods:{initDefaultAcitve:function(){var t=location.pathname,n=!0,e=!1,i=void 0;try{for(var s,o=Object.entries(this.routerMap)[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var r=s.value,c=a(r,2),l=c[0];if(c[1]===t){this.activeIndex=l.toString();break}}}catch(t){e=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(e)throw i}}},routeHandler:function(t){location.href=this.routerMap[t]||"/"}}},r={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("nav-top-bar"),t._v(" "),e("el-container",{staticClass:"app-container"},[e("el-header"),t._v(" "),e("el-container",[e("el-aside",[e("el-menu",{attrs:{"default-active":t.activeIndex}},[e("el-menu-item",{attrs:{index:"0"},on:{click:function(n){t.routeHandler(0)}}},[e("i",{staticClass:"el-icon-fa-user-circle-o"}),t._v("基本信息\n          ")]),t._v(" "),e("el-menu-item",{attrs:{index:"1"},on:{click:function(n){t.routeHandler(1)}}},[e("i",{staticClass:"el-icon-fa-lock"}),t._v("安全设置\n          ")])],1)],1),t._v(" "),e("el-main",{staticStyle:{background:"white"}},[e("div",{attrs:{id:"main-app"}})])],1)],1)],1)},staticRenderFns:[]},c=e("VU/8")(o,r,!1,function(t){e("NTE6")},null,null).exports,l=e("IcnI");new i.a({el:"#app",store:l.a,render:function(t){return t(c)}});n.a=i.a},E1zW:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("8Qhf"),s=e("NYxO"),a={data:function(){return{}},mounted:function(){},computed:Object.assign({userRoles:function(){var t=this.user.userRole;return[{val:1,name:"普通用户"},{val:2,name:"节点商"},{val:4,name:"资源商"}].reduce(function(n,e){return(e.val&t)===e.val&&n.push(e.name),n},[]).join("|")}},Object(s.b)({user:"session"})),methods:{}},o={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("ul",{staticClass:"setting-items"},[e("li",[t._m(0),t._v(" "),e("span",{staticClass:"setting-desc"},[t._v(t._s(t.user.email||t.user.mobile))]),t._v(" "),e("div",{staticClass:"setting-action"},[e("el-button",{attrs:{type:"text"}},[t._v("查看")])],1)]),t._v(" "),e("li",[t._m(1),t._v(" "),e("span",{staticClass:"setting-desc"},[t._v(t._s(t.user.nickname))])]),t._v(" "),e("li",[t._m(2),t._v(" "),e("span",{staticClass:"setting-desc"},[t._v(t._s(t.userRoles))])])])])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"setting-title"},[n("label",[this._v("loginName")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"setting-title"},[n("label",[this._v("用户名")])])},function(){var t=this.$createElement,n=this._self._c||t;return n("span",{staticClass:"setting-title"},[n("label",[this._v("用户角色")])])}]},r=e("VU/8")(a,o,!1,function(t){e("iyE4")},null,null).exports;new i.a({el:"#main-app",render:function(t){return t(r)}})},HkHh:function(t,n,e){"use strict";var i=e("NYxO"),s={name:"nav-top-bar",data:function(){return{}},computed:Object(i.b)({userInfo:"session"}),mounted:function(){this.syncUserSession(),this.listenWindowVisibility()},methods:{listenWindowVisibility:function(){function t(t){var e="visible",s="hidden",a={focus:e,focusin:e,pageshow:e,blur:s,focusout:s,pagehide:s};"visible"===((t=t||window.event).type in a?a[t.type]:this[n]?"hidden":"visible")&&i.syncUserSession()}var n="hidden",e=document,i=this;n in e?e.addEventListener("visibilitychange",t):(n="mozHidden")in e?e.addEventListener("mozvisibilitychange",t):(n="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",t):(n="msHidden")in e?e.addEventListener("msvisibilitychange",t):window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t},syncUserSession:function(){var t=this;this.$store.dispatch("checkUserSession").then(function(n){n||t.$store.dispatch("loadCurrentUserInfo").then(function(){location.reload()})})},logoutHandler:function(){var t=this;this.$axios.get("/v1/passport/logout").then(function(){t.$vuex.dispatch("userLogout").then(function(){setTimeout(function(){location.replace("/pages/user/login.html")},20)})})},handleNavTopCommand:function(t){switch(t){case"gotoAccountSetting":location.href="/pages/account/security.html"}}}},a={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"nav-top-wrapper"},[t.userInfo?e("div",{staticClass:"nav-top-container"},[e("ul",{staticClass:"nav-top-right"},[e("li",{staticClass:"nav-top-item"},[e("el-dropdown",{on:{command:t.handleNavTopCommand}},[e("span",{staticClass:"el-dropdown-link"},[t._v("\n                      "+t._s(t.userInfo.nickname)),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"gotoAccountSetting"}},[t._v("账户设置")])],1)],1)],1),t._v(" "),e("li",{staticClass:"nav-top-item",on:{click:t.logoutHandler}},[t._v("退出")]),t._v(" "),t._m(0)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("li",{staticClass:"nav-top-item"},[n("a",{attrs:{href:"/pages/user/index.html"}},[this._v("我的feth")])])}]},o=e("VU/8")(s,a,!1,function(t){e("nSCy")},"data-v-4baea5a0",null);n.a=o.exports},NTE6:function(t,n,e){},fnIZ:function(t,n,e){"use strict";var i=e("G3VR"),s=e("IcnI");n.a=function(t){new i.a(Object.assign({el:"#app",store:s.a},t))}},iyE4:function(t,n,e){},nSCy:function(t,n,e){}},["E1zW"]);