webpackJsonp([7],{"6aq4":function(t,e,s){},"8Qhf":function(t,e,s){"use strict";function r(t){s("9E1Z")}var o=s("G3VR"),a=s("HkHh"),n=function(){function t(t,e){var s=[],r=!0,o=!1,a=void 0;try{for(var n,i=t[Symbol.iterator]();!(r=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return s}return function(e,s){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i={data:function(){return{activeIndex:"0",routerMap:{0:"/pages/account/index.html",1:"/pages/account/security.html"}}},mounted:function(){this.initDefaultAcitve()},components:{NavTopBar:a.a},methods:{initDefaultAcitve:function(){var t=location.pathname,e=!0,s=!1,r=void 0;try{for(var o,a=Object.entries(this.routerMap)[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var i=o.value,l=n(i,2),c=l[0];if(l[1]===t){this.activeIndex=c.toString();break}}}catch(t){s=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(s)throw r}}},routeHandler:function(t){location.href=this.routerMap[t]||"/"}}},l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-top-bar"),t._v(" "),s("el-container",{staticClass:"app-container"},[s("el-header"),t._v(" "),s("el-container",[s("el-aside",[s("el-menu",{attrs:{"default-active":t.activeIndex}},[s("el-menu-item",{attrs:{index:"0"},on:{click:function(e){t.routeHandler(0)}}},[s("i",{staticClass:"el-icon-fa-user-circle-o"}),t._v("基本信息\n          ")]),t._v(" "),s("el-menu-item",{attrs:{index:"1"},on:{click:function(e){t.routeHandler(1)}}},[s("i",{staticClass:"el-icon-fa-lock"}),t._v("安全设置\n          ")])],1)],1),t._v(" "),s("el-main",{staticStyle:{background:"white"}},[s("div",{attrs:{id:"main-app"}})])],1)],1)],1)},c=[],d={render:l,staticRenderFns:c},u=d,w=s("VU/8"),p=r,f=w(i,u,!1,p,null,null),m=f.exports;new o.a({el:"#app",render:function(t){return t(m)}});e.a=o.a},"9E1Z":function(t,e,s){},HkHh:function(t,e,s){"use strict";function r(t){s("edu7")}var o=s("kEHT"),a={name:"nav-top-bar",data:function(){return{user:o.a.get("userInfo")||{}}},mounted:function(){this.checkLoginStatus()},methods:{checkLoginStatus:function(){this.user.userId||location.replace("/pages/user/login.html")},logoutHandler:function(){this.$axios.get("//api.freelog.com/v1/passport/logout").then(function(t){o.a.remove("userInfo"),location.replace("/pages/user/login.html")})},handleNavTopCommand:function(t){switch(t){case"gotoAccountSetting":location.href="/pages/account/security.html"}}}},n=a,i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"nav-top-wrapper"},[t.user?s("div",{staticClass:"nav-top-container"},[s("ul",{staticClass:"nav-top-right"},[s("li",{staticClass:"nav-top-item"},[s("el-dropdown",{on:{command:t.handleNavTopCommand}},[s("span",{staticClass:"el-dropdown-link"},[t._v("\n                      "+t._s(t.user.nickname)),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"gotoAccountSetting"}},[t._v("账户设置")])],1)],1)],1),t._v(" "),s("li",{staticClass:"nav-top-item",on:{click:t.logoutHandler}},[t._v("退出")]),t._v(" "),t._m(0)])]):t._e()])},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"nav-top-item"},[s("a",{attrs:{href:"/pages/user/index.html"}},[t._v("我的feth")])])}],c={render:i,staticRenderFns:l},d=c,u=s("VU/8"),w=r,p=u(n,d,!1,w,"data-v-0f5da88c",null);e.a=p.exports},"MaR/":function(t,e,s){"use strict";function r(t){s("6aq4")}Object.defineProperty(e,"__esModule",{value:!0});var o=s("8Qhf"),a=s("kEHT"),n={data:function(){var t=this;return{resetPayPasswordDialog:!1,shouldShowPasswordDialog:!1,passwordRules:{newPassword:[{validator:function(e,s,r){""===s?r(new Error("请输入密码")):(""!==t.passwordForm.checkNewPassword&&t.$refs.passwordForm.validateField("checkNewPassword"),r())},trigger:"change"}],checkNewPassword:[{validator:function(e,s,r){""===s?r(new Error("请再次输入密码")):s!==t.passwordForm.newPassword?r(new Error("两次输入密码不一致!")):r()},trigger:"change"}]},passwordForm:{title:"",type:"",oldPassword:"",newPassword:"",checkNewPassword:""}}},mounted:function(){},methods:{resetPayPasswordHandler:function(){this.shouldShowPasswordDialog=!0,this.passwordForm.title="重置支付密码",this.passwordForm.type="resetPayPassword"},resetLoginPasswordHandler:function(){this.shouldShowPasswordDialog=!0,this.passwordForm.title="重置登录密码",this.passwordForm.type="resetLoginPassword"},createPayPasswordHandler:function(){this.shouldShowPasswordDialog=!0,this.passwordForm.title="创建支付密码",this.passwordForm.type="createPayPassword"},handleClose:function(t){this.$refs.passwordForm.resetFields(),t()},routeToPathHandler:function(t){location.href=t},confirmHandler:function(){var t=this;this.$refs.passwordForm.validate(function(e){if(e){var s=t.passwordForm.type;t[s]().then(function(){t.shouldShowPasswordDialog=!1}).catch(function(e){var s=e&&e.message||e||"出错啦！";t.$message.error(s)})}else t.$message.error("输入校验有误")})},resetLoginPassword:function(){var t=this,e=a.a.get("userInfo");if(!e||!e.userId)return this.$message.error("not login");var s={loginName:e.loginName,password:this.passwordForm.newPassword};return this.$axios.post("//api.freelog.com/v1/userinfos/resetPassword",s).then(function(e){var s=e.data;if(0!==s.ret||0!==s.errcode)throw new Error(s.msg);t.$message.success("设置成功")})},createPayPassword:function(){var t=this,e={password:this.passwordForm.newPassword};return this.$axios.post("//api.freelog.com/v1/pay/password",e).then(function(e){var s=e.data;if(0!==s.ret||0!==s.errcode)throw new Error(s.msg);t.$message.success("设置成功")})},resetPayPassword:function(){var t=this,e=a.a.get("userInfo");if(!e||!e.userId)return this.$message.error("not login");var s={oldPassword:this.passwordForm.oldPassword,newPassword:this.passwordForm.newPassword};return this.$axios.put("//api.freelog.com/v1/pay/password/"+e.userId,s).then(function(e){var s=e.data;if(0!==s.ret||0!==s.errcode)throw new Error(s.msg);t.$message.success("重置成功")})}}},i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("ul",{staticClass:"setting-items"},[s("li",[t._m(0),t._v(" "),s("span",{staticClass:"setting-desc"}),t._v(" "),s("div",{staticClass:"setting-action"},[s("el-button",{attrs:{type:"text"},on:{click:t.resetPayPasswordHandler}},[t._v("重置")]),t._v(" "),s("el-button",{attrs:{type:"text"},on:{click:t.createPayPasswordHandler}},[t._v("创建")])],1)]),t._v(" "),s("li",[t._m(1),t._v(" "),s("el-button",{staticClass:"setting-action",attrs:{type:"text"},on:{click:t.resetLoginPasswordHandler}},[t._v("重置")])],1)]),t._v(" "),s("el-dialog",{attrs:{title:t.passwordForm.title,visible:t.shouldShowPasswordDialog,width:"30%","before-close":t.handleClose,center:""},on:{"update:visible":function(e){t.shouldShowPasswordDialog=e}}},[s("el-form",{ref:"passwordForm",attrs:{"label-width":"100px","status-icon":"",model:t.passwordForm,rules:t.passwordRules}},[s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:/^reset/.test(t.passwordForm.type),expression:"/^reset/.test(passwordForm.type)"}],attrs:{label:"旧密码",prop:"oldPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:t.passwordForm.oldPassword,callback:function(e){t.$set(t.passwordForm,"oldPassword",e)},expression:"passwordForm.oldPassword"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:t.passwordForm.newPassword,callback:function(e){t.$set(t.passwordForm,"newPassword",e)},expression:"passwordForm.newPassword"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"确认新密码",prop:"checkNewPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:t.passwordForm.checkNewPassword,callback:function(e){t.$set(t.passwordForm,"checkNewPassword",e)},expression:"passwordForm.checkNewPassword"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.shouldShowPasswordDialog=!1}}},[t._v("取 消")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandler}},[t._v("确 定")])],1)],1)],1)},l=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"setting-title"},[s("label",[t._v("支付密码")]),s("i",{staticClass:"el-icon-fa-lock"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"setting-title"},[s("label",[t._v("登录密码")]),s("i",{staticClass:"el-icon-fa-lock"})])}],c={render:i,staticRenderFns:l},d=c,u=s("VU/8"),w=r,p=u(n,d,!1,w,null,null),f=p.exports;new o.a({el:"#main-app",render:function(t){return t(f)}})},edu7:function(t,e,s){}},["MaR/"]);
//# sourceMappingURL=security.js.map