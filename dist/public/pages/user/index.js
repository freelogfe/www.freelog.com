webpackJsonp([0],{"/uyM":function(t,e,a){},"01nu":function(t,e,a){},"1Sjs":function(t,e,a){},"6DHB":function(t,e,a){},"6UCX":function(t,e,a){"use strict";var n=a("G3VR"),s=a("dW81"),r=a("NYxO"),o={name:"user-aside-nav",data:function(){return{activeNavName:"my-accounts",navs:[{title:"我的关注",name:"my-collections"},{title:"我的资源",name:"my-resources"},{title:"我的账户",name:"my-accounts"},{title:"资料与账号",name:"my-profile"}]}},computed:Object(r.b)({user:"session"}),mounted:function(){var t=this;this.user&&this.user.userId||this.$vuex.dispatch("getCurrentUserInfo").then(function(e){t.changePanel()})},methods:{switchNavHandler:function(t){this.activeNavName=t.name,this.changePanel()},changePanel:function(){this.$store.dispatch("changePanel",this.activeNavName)}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.user?a("el-aside",{staticClass:"user-aside-nav-wrap",attrs:{width:"260px"}},[a("div",{staticClass:"user-portrait"},[a("div",{staticClass:"center"},[a("a",{attrs:{href:"/pages/user/index.html"}},[a("img",{staticClass:"portrait-img",attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRb_dez7L9rZGrxliWIWRzbH6H0u0BMePCrTB6wVbLtcfrAMKII",alt:""}})]),t._v(" "),a("p",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))])])]),t._v(" "),a("ul",{staticClass:"user-nav-tabs"},t._l(t.navs,function(e,n){return a("li",{staticClass:"user-nav-item",class:{active:e.name===t.activeNavName},attrs:{"nav-name":e.name},on:{click:function(a){t.switchNavHandler(e)}}},[t._v("\n      "+t._s(e.title)+"\n    ")])}))]):t._e()},staticRenderFns:[]},i=a("VU/8")(o,c,!1,function(t){a("eDbg")},"data-v-2295e0b3",null).exports,l={data:function(){return{}},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t})({},Object(r.b)({personal:"personal"}),{themeCls:function(){var t="white";switch(this.personal.panelName){case"my-accounts":t="transparent";break;default:t="white"}return t}}),mounted:function(){},components:{NavTopBar:s.a,UserAsideNav:i},methods:{}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav-top-bar"),this._v(" "),e("el-container",{staticClass:"app-container"},[e("user-aside-nav"),this._v(" "),e("el-main",{staticClass:"main-app-content",class:[this.themeCls]},[e("div",{attrs:{id:"main-app"}})])],1)],1)},staticRenderFns:[]},d=a("VU/8")(l,u,!1,function(t){a("SBTx")},"data-v-d1be6906",null).exports,f=a("IcnI");new n.a({el:"#app",store:f.a,render:function(t){return t(d)}});e.a=n.a},"7TBe":function(t,e,a){},"7xrK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("6UCX"),s=a("IcnI"),r=a("NYxO"),o=a("dW81"),c={name:"my-profile",data:function(){return{}},components:{},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t})({},Object(r.b)({session:"session"})),mounted:function(){},methods:{}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-profile-view"},[a("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[a("el-form-item",{staticClass:"profile-info-item",attrs:{label:"用户姓名"}},[t._v("\n      "+t._s(t.session.userName?t.session.userName:"未设置用户姓名")+"\n    ")]),t._v(" "),a("el-form-item",{staticClass:"profile-info-item",attrs:{label:"用户昵称"}},[t._v("\n      "+t._s(t.session.nickname)+"\n      ")]),t._v(" "),a("el-form-item",{staticClass:"profile-info-item",attrs:{label:"邮箱"}},[t._v("\n      "+t._s(t.session.email)+"\n    ")]),t._v(" "),a("el-form-item",{staticClass:"profile-info-item",attrs:{label:"手机号"}},[t._v("\n      "+t._s(t.session.mobile?t.session.mobile:"未设置手机号")+"\n    ")])],1)],1)},staticRenderFns:[]},l=a("VU/8")(c,i,!1,function(t){a("1Sjs")},"data-v-63d61ff8",null).exports,u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"my-collections-view"},[this._v("\n  待开发\n")])},staticRenderFns:[]},d=a("VU/8")({name:"my-collections",data:function(){return{}},components:{},mounted:function(){},methods:{}},u,!1,function(t){a("O610")},"data-v-1aee2088",null).exports,f=a("aIHY"),m={name:"my-accounts",data:function(){return{accounts:[{name:"人民币",currencyType:f.a.fcny},{name:"美元",currencyType:f.a.fusd},{name:"飞致币",currencyType:f.a.feth}],accountActions:[{title:"充值",icon:"fl-recharge-icon",action:"recharge"},{title:"转账",icon:"fl-transfer-icon",action:"transfer"},{title:"提现",icon:"fl-withdraw-icon",action:"withdraw"},{title:"交易记录",icon:"fl-record-icon",action:"record"},{title:"重置密码",icon:"fl-reset-icon",action:"reset"}]}},components:{},mounted:function(){var t=this;this.loadAssets().then(this.formatAssets.bind(this)).then(function(e){console.log(e);var a={};e.map(function(t){a[t.currencyType]=t}),t.accounts=t.accounts.map(function(t){var e=a[t.currencyType];return e&&Object.assign(t,e),t})}).catch(function(t){console.log(t)})},methods:{gotoCreateAccountHandler:function(t){this.gotoAccountActionView({name:"account-create-view",data:t})},accountActionHandler:function(t,e){var a={data:e};switch(t){case"recharge":a.name="account-recharge-view";break;case"transfer":a.name="account-transfer-view";break;case"withdraw":a.name="account-withdraw-view";break;case"record":a.name="account-transaction-records-view";break;case"reset":a.name="account-reset-pay-password-view"}this.gotoAccountActionView(a)},gotoAccountActionView:function(t){this.$store.dispatch("changePanel",t)},formatAssets:function(t){return t.forEach(function(t){t.currencyConfig=f.b[t.currencyType],t.showAbbr=t.currencyConfig.abbr.toUpperCase(),"FETH"!==t.showAbbr&&(t.showAbbr=t.showAbbr.slice(1))}),t},loadAssets:function(){return this.$axios.get("/v1/pay/accounts").then(function(t){return t.data.data||[]})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"assets-wrap"},[a("div",{staticClass:"account-list-wrap"},[a("ul",{staticClass:"account-list"},t._l(t.accounts,function(e){return a("li",{staticClass:"account-item"},[a("div",{staticClass:"account-type-name"},[t._v(t._s(e.name)+"账户")]),t._v(" "),a("div",{staticClass:"account-info-wrap"},[e.accountId?a("div",{staticClass:"account-info clearfix"},[a("div",{staticClass:"left-side-content"},[a("div",{staticClass:"account-balance"},[a("span",[t._v(t._s(t._f("humanizeCurrency")(e.balance,e.currencyConfig.abbr)))]),t._v(" "),a("i",[t._v(t._s(e.showAbbr))])]),t._v(" "),a("div",[a("div",{staticClass:"acc-digest-info"},[a("label",[t._v("账户名")]),a("span",{staticClass:"account-detail-content"},[t._v(t._s(e.accountName))])]),t._v(" "),a("div",{staticClass:"acc-digest-info"},[a("label",[t._v("账户ID")]),a("span",{staticClass:"account-detail-content"},[t._v(t._s(e.accountId))])])])]),t._v(" "),a("div",{staticClass:"rt-side-content"},[a("ul",{staticClass:"account-actions clearfix"},t._l(t.accountActions,function(n){return a("li",{staticClass:"account-action-item",on:{click:function(a){t.accountActionHandler(n.action,e)}}},[a("i",{staticClass:"acc-act-icon",class:[n.icon]}),t._v(" "),a("p",[t._v(t._s(n.title))])])}))])]):a("div",{staticClass:"no-account-wrap"},[t._v("\n            您还没有"+t._s(e.name)+"账户，\n            "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.gotoCreateAccountHandler(e)}}},[t._v("去创建+")])],1)])])}))])])},staticRenderFns:[]},h=a("VU/8")(m,p,!1,function(t){a("ZHUQ")},"data-v-fcdb3794",null).exports,v={name:"fl-pagination",data:function(){return{total:8,tableProps:{data:[]},currentPage:1,pageSize:10,loading:!1}},props:{pagination:{type:Object,default:function(){return{pageSize:10}}},config:Object,rowClickHandler:{type:Function,default:function(){}}},mounted:function(){Object.assign(this.tableProps,this.config),this.pageSize=this.pagination.pageSize||10,this.load()},methods:{loadData:function(){if(!this.pagination.target)throw new Error("need pagination target param");var t={page:this.currentPage,pageSize:this.pageSize};return this.pagination.params&&Object.assign(t,this.pagination.params),this.$axios.get(this.pagination.target,{params:t}).then(function(t){return t.data.data})},update:function(t){t&&(console.log(t),this.total=t.totalItem,this.tableProps.data=t.dataList)},load:function(){var t=this;this.loading||(this.loading=!0,this.loadData().then(this.update.bind(this)).then(function(){t.loading=!1}).catch(function(e){console.error(e),t.loading=!0}))},loadNextHandler:function(){this.currentPage+=1,this.load()},loadPrevHandler:function(){this.currentPage-=1,this.load()},gotoLastPageHandler:function(){this.currentPage=Math.ceil(this.total/this.pageSize),this.load()},gotoFirstPageHandler:function(){this.currentPage=1,this.load()}},computed:{hasNext:function(){return this.currentPage*this.pageSize<this.total},hasPrev:function(){return this.currentPage>1},from:function(){return(this.currentPage-1)*this.pageSize+1},to:function(){return this.from+this.tableProps.data.length-1}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fl-pagination"},[a("el-table",t._b({ref:"table",staticStyle:{width:"100%"},on:{"row-click":t.rowClickHandler}},"el-table",t.tableProps,!1),[t._t("list")],2),t._v(" "),a("div",{staticClass:"fl-pg-ft clearfix"},[t._t("footer"),t._v(" "),a("div",{staticClass:"fl-pg-info"},[t.hasPrev?a("el-button",{attrs:{type:"text"},on:{click:t.gotoFirstPageHandler}},[t._v("<< 首页")]):t._e(),t._v(" "),t.hasPrev?a("el-button",{attrs:{type:"text"},on:{click:t.loadPrevHandler}},[t._v("< 上一页")]):t._e(),t._v(" "),a("span",{staticClass:"fl-pg-num"},[t.to>0&&t.to>t.from?a("span",[t._v(t._s(t.from)+"-"+t._s(t.to)+"条，")]):t._e(),t._v("共"+t._s(t.total)+"条")]),t._v(" "),t.hasNext?a("el-button",{attrs:{type:"text"},on:{click:t.loadNextHandler}},[t._v("下一页>")]):t._e(),t._v(" "),t.hasNext?a("el-button",{attrs:{type:"text"},on:{click:t.gotoLastPageHandler}},[t._v("尾页>>")]):t._e()],1)],2)],1)},staticRenderFns:[]},w=a("VU/8")(v,g,!1,function(t){a("Ua9G")},null,null).exports,b={name:"my-resources",data:function(){return{searchForm:{type:"resource",input:""},searchTypes:[{value:"node",label:"节点"},{value:"resource",label:"资源"},{value:"resourceType",label:"资源类型"}],tableConfig:{rowClassName:"resource-row","cell-class-name":"res-row-cell"},paginationConfig:{target:"/qi/v1/getMyResources.json"}}},components:{FlPagination:w},mounted:function(){this.host=location.host.split(".").slice(1).join(".")},methods:{rowClickHandler:function(t){this.$store.dispatch("changePanel",{name:"resource-contract-detail-view",data:t})},formatNodeDomain:function(t){return t+"."+this.host},resolveStatus:function(t){var e;switch(t){case 1:case 2:e="不可用";break;case 3:e="可用";break;case 4:case 5:case 6:e="合同终止";break;default:e="未知状态"}return e},searchHandler:function(){this.$message.warning("未开始设计")}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-resources-wrap"},[a("el-form",{staticClass:"search-input-wrap",attrs:{inline:!0}},[a("el-form-item",[a("el-select",{staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.searchForm.type,callback:function(e){t.$set(t.searchForm,"type",e)},expression:"searchForm.type"}},t._l(t.searchTypes,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"400px"},attrs:{size:"small","suffix-icon":"el-icon-search",placeholder:"按回车搜索"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchHandler(e):null}},model:{value:t.searchForm.input,callback:function(e){t.$set(t.searchForm,"input",e)},expression:"searchForm.input"}})],1)],1),t._v(" "),a("fl-pagination",{staticClass:"my-resource-list",attrs:{config:t.tableConfig,rowClickHandler:t.rowClickHandler,pagination:t.paginationConfig}},[a("template",{slot:"list"},[a("el-table-column",{attrs:{label:"资源|状态|类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("p",{staticClass:"resource-name"},[t._v(t._s(e.row.resourceInfo.resourceName))]),t._v(" "),a("div",[a("span",{staticClass:"resource-status",class:["status-"+e.row.status]},[t._v(t._s(t.resolveStatus(e.row.status)))]),t._v(" "),a("span",{staticClass:"resource-type"},[t._v(t._s(e.row.resourceInfo.resourceType))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"节点",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"node-domain"},[t._v("\n            "+t._s(t.formatNodeDomain(e.row.nodeInfo.nodeDomain))+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"135",label:"签约时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("fmtDate")(e.row.createDate))+"\n        ")]}}])})],1)],2)],1)},staticRenderFns:[]},y=a("VU/8")(b,_,!1,function(t){a("daBu")},null,null).exports,C={name:"account-action-layout-view",data:function(){return{}},props:{title:String,showFooter:{type:Boolean,default:!0},returnName:{type:String,default:"my-accounts"}},mounted:function(){},computed:{},methods:{cancelHandler:function(){this.goBack()},goBack:function(){this.$store.dispatch("changePanel",this.returnName)}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-layout-view"},[a("header",[a("span",[t._v(t._s(t.title))]),t._v(" "),a("nav",{on:{click:t.cancelHandler}},[a("i",[t._v("‹")]),t._v(" 返回")])]),t._v(" "),a("div",{staticClass:"account-action-view-wrap"},[t._t("default"),t._v(" "),t.showFooter?a("div",{staticClass:"form-ft"},[a("el-button",{staticClass:"ft-btn",on:{click:t.cancelHandler}},[t._v("取消")]),t._v(" "),t._t("footer")],2):t._e()],2)])},staticRenderFns:[]},x=a("VU/8")(C,k,!1,function(t){a("H+kY")},"data-v-61c60d54",null).exports,$={name:"account-create-view",data:function(){var t=this,e=/^\d{6}$/;return{form:{accountName:"",password:"",checkPassword:""},rules:{accountName:[{required:!0,message:"请输入账户名称",trigger:"blur"},{min:2,max:20,message:"由2-20位字符组成",trigger:"blur"}],password:[{required:!0,message:"请输入支付密码",trigger:"blur"},{validator:function(a,n,s){""===n?s(new Error("请输入密码")):e.test(n)?(""!==t.form.checkPassword&&t.$refs.createForm.validateField("checkPassword"),s()):s(new Error("请输入6位数字"))},trigger:"blur"},{min:6,max:6,message:"由6位数字组成",trigger:"blur"}],checkPassword:[{required:!0,message:"请输入支付确认密码",trigger:"blur"},{validator:function(a,n,s){""===n?s(new Error("请再次输入密码")):e.test(n)?n!==t.form.password?s(new Error("两次输入密码不一致!")):s():s(new Error("请输入6位数字"))},trigger:"change"},{min:6,max:6,message:"由6位数字组成",trigger:"blur"}]}}},props:{renderData:Object},components:{AccountLayout:x},mounted:function(){console.log(this.renderData)},computed:{currencyTypeInfo:function(){return f.b[this.renderData.currencyType||"1"]},navTitle:function(){return"创建"+this.currencyTypeInfo.name+"账户"}},methods:{cancelHandler:function(){this.goBack()},goBack:function(){this.$store.dispatch("changePanel","my-accounts")},createHandler:function(){var t=this;this.$refs.createForm.validate(function(e){e?t.$axios.post("/v1/pay/accounts",{accountName:t.form.accountName,currencyType:t.currencyTypeInfo.value,password:t.form.password}).then(function(e){var a=e.data;0===a.ret&&0===a.errcode?(t.$message.success("创建成功"),t.goBack()):t.$message.error(a.msg||"操作失败")}):console.log("error submit!!")})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-account-view"},[a("account-layout",{attrs:{title:t.navTitle}},[a("div",{staticClass:"create-account-input-wrap"},[a("el-form",{ref:"createForm",attrs:{"label-width":"100px",model:t.form,"label-position":"left",rules:t.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"账户名称",prop:"accountName"}},[a("el-input",{staticClass:"input-area",attrs:{size:"small"},model:{value:t.form.accountName,callback:function(e){t.$set(t.form,"accountName",e)},expression:"form.accountName"}}),t._v(" "),a("label",{staticClass:"input-tip"},[t._v("由2-20位字符组成")])],1),t._v(" "),a("el-form-item",{attrs:{label:"支付密码",prop:"password"}},[a("el-input",{staticClass:"input-area",attrs:{size:"small",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),a("label",{staticClass:"input-tip"},[t._v("由6位数字组成")])],1),t._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[a("el-input",{staticClass:"input-area",attrs:{size:"small",type:"password"},model:{value:t.form.checkPassword,callback:function(e){t.$set(t.form,"checkPassword",e)},expression:"form.checkPassword"}})],1)],1)],1),t._v(" "),a("template",{slot:"footer"},[a("el-button",{staticClass:"ft-btn",attrs:{type:"primary"},on:{click:t.createHandler}},[t._v("创建")])],1)],2)],1)},staticRenderFns:[]},N=a("VU/8")($,P,!1,function(t){a("DrAW")},"data-v-8465eab2",null).exports,D={name:"account-recharge-view",data:function(){var t=this;return{createEthForm:{pass:"",checkPass:""},createEthRules:{pass:[{required:!0,message:"请输入加密密码",trigger:"blur"},{validator:function(e,a,n){""===a?n(new Error("请输入密码")):(""!==t.createEthForm.checkPass&&t.$refs.createEthForm.validateField("checkPass"),n())},trigger:"blur"},{min:6,message:"最少6个字符",trigger:"blur"}],checkPass:[{required:!0,message:"请输入确认加密密码",trigger:"blur"},{validator:function(e,a,n){""===a?n(new Error("请再次输入密码")):a!==t.createEthForm.pass?n(new Error("两次输入密码不一致!")):n()},trigger:"change"},{min:6,message:"最少6个字符",trigger:"blur"}]},shouldShowAddDialog:!1,addCardNo:"",shouldShowCreateDialog:!1,amount:"",cardNo:"",cardClips:[]}},props:{renderData:Object},components:{AccountLayout:x},mounted:function(){var t=this;this.loadCardclips().then(function(e){t.cardClips=e.map(t.resolveCard)})},computed:{navTitle:function(){return this.currencyInfo.name+"账户充值"},currencyInfo:function(){return f.b[this.renderData.currencyType]},rechargeMethod:function(){var t;switch(this.renderData.currencyType){case 1:t="以太坊";break;case 2:case 3:case 4:default:t="银行"}return t}},methods:{officialTapHandler:function(){var t=this;this.$axios.post("/v1/pay/officialTap",{cardNo:this.cardNo,currencyType:this.renderData.currencyType}).then(function(e){t.$message.info(e.data.msg)})},showAddCardDialogHandler:function(){this.shouldShowAddDialog=!0,this.addCardNo=""},addCardNoHandler:function(){var t=this;this.addCardToCardclips(this.addCardNo).then(function(){t.$message.success("添加成功")}).catch(this.$error.showErrorMessage)},resolveCard:function(t){return t.label=t.bankName+" | "+t.cardNo,t.value=t.cardNo,t},loadCardclips:function(){var t=this;return this.$axios.get("/v1/pay/cardclips?currencyType="+this.renderData.currencyType).then(function(e){var a=e.data;return t.isSuccess(a)?a.data:Promise.reject(a.msg)})},isSuccess:function(t){return 0===t.ret&&0===t.errcode},rechargeHandler:function(){var t=this;this.$axios.post("/v1/pay/recharge",{accountId:this.renderData.accountId,cardNo:this.cardNo,amount:this.currencyInfo.unit*this.amount}).then(function(e){var a=e.data;if(0!==a.ret||0!==a.errcode)return Promise.reject(a.msg);var n;switch(a.data.tradeStatus){case 1:n="充值成功";break;case 2:n="充值失败";break;case 3:n="发起中";break;case 4:n="超时失败";break;default:n=a.msg}[1,3].includes(a.data.tradeStatus)?(t.$message.success(n),t.$store.dispatch("changePanel","my-accounts")):t.$message.error(n)}).catch(this.$error.showErrorMessage)},handleClose:function(t){this.$refs.createEthForm.resetFields(),t()},showCreateEthDialog:function(){this.shouldShowCreateDialog=!0},createEthAccount:function(){var t=this;this.$confirm("此加密密码用于加密以太坊keystore，一旦创建后不可更改，系统不予以保存，需用户自行保存妥善！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$refs.createEthForm.validate(function(e){e?t.$axios.post("/v1/pay/helper/feather/createEthAccount",{password:t.createEthForm.pass}).then(function(e){var a=e.data;t.isSuccess(a)?t.addCardToCardclips(a.data.address).then(function(){t.$message.success("创建成功")}).catch(t.$message.error):t.$message.error(a.msg||"创建失败"),t.shouldShowCreateDialog=!1}):console.log("error submit!!")})}).catch(function(){})},addCardToCardclips:function(t){var e=this;return this.$axios.post("/v1/pay/cardclips",{cardNo:t,currencyType:this.renderData.currencyType}).then(function(t){var a=t.data;return e.isSuccess(a)?(e.cardClips.push(e.resolveCard(a.data)),a.data):Promise.reject(a.msg)})}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-recharge-view"},[a("account-layout",{attrs:{title:t.navTitle}},[a("div",{staticClass:"account-info-wrap"},[a("h5",[t._v("账户信息")]),t._v(" "),a("el-form",{staticClass:"account-info-content",attrs:{"label-width":"60px",inline:"","label-position":"left"}},[a("el-form-item",{staticClass:"account-info-item",attrs:{label:"账户ID"}},[a("label",{staticClass:"account-show-content"},[t._v(t._s(t.renderData.accountId))])]),t._v(" "),a("el-form-item",{staticClass:"account-info-item",attrs:{label:"账户名"}},[a("label",{staticClass:"account-show-content"},[t._v(t._s(t.renderData.accountName))])]),t._v(" "),a("el-form-item",{staticClass:"account-info-item",attrs:{label:"余额","label-width":"40px"}},[a("label",{staticClass:"account-show-content"},[t._v("\n            "+t._s(t._f("humanizeCurrency")(t.renderData.balance,t.currencyInfo.abbr))+" "+t._s(t.currencyInfo.abbr)+"\n          ")])])],1)],1),t._v(" "),a("div",{staticClass:"account-info-wrap"},[a("h5",[t._v("充值方式（"+t._s(t.rechargeMethod)+"）")]),t._v(" "),a("el-form",{attrs:{"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"充值金额"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),a("label",{staticClass:"input-tip"},[t._v(t._s(t.currencyInfo.abbr))])],1),t._v(" "),a("el-form-item",{attrs:{label:"Address"}},[a("el-select",{staticStyle:{width:"440px"},attrs:{size:"small",placeholder:"请选择充值账户"},model:{value:t.cardNo,callback:function(e){t.cardNo=e},expression:"cardNo"}},t._l(t.cardClips,function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.showAddCardDialogHandler}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),"feth"===t.currencyInfo.abbr?a("div",{staticClass:"form-item-tip"},[t._v("还没有以太坊账户？\n            "),a("el-button",{attrs:{type:"text"},on:{click:t.showCreateEthDialog}},[t._v("去创建")])],1):t._e()],1)],1)],1),t._v(" "),a("template",{slot:"footer"},[a("el-button",{staticClass:"ft-btn",attrs:{type:"primary"},on:{click:t.rechargeHandler}},[t._v("充值")]),t._v(" "),t.cardNo?a("el-button",{staticClass:"ft-btn",attrs:{type:"primary"},on:{click:t.officialTapHandler}},[t._v("赠送feth")]):t._e()],1)],2),t._v(" "),a("el-dialog",{attrs:{title:"添加卡号",visible:t.shouldShowAddDialog,width:"500px"},on:{"update:visible":function(e){t.shouldShowAddDialog=e}}},[a("el-form",{attrs:{"label-width":"50px"}},[a("el-form-item",{attrs:{label:"卡号",prop:"addCardNo"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{size:"small","auto-complete":"off"},model:{value:t.addCardNo,callback:function(e){t.addCardNo=e},expression:"addCardNo"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"text-align":"center"}},[a("el-button",{on:{click:function(e){t.shouldShowAddDialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCardNoHandler}},[t._v("提交")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"创建以太坊地址",visible:t.shouldShowCreateDialog,width:"40%","before-close":t.handleClose},on:{"update:visible":function(e){t.shouldShowCreateDialog=e}}},[a("h3",{staticStyle:{"margin-bottom":"20px","text-align":"center"}},[t._v("请设置以太坊密钥加密密码")]),t._v(" "),a("el-form",{ref:"createEthForm",attrs:{model:t.createEthForm,"status-icon":"",rules:t.createEthRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"加密密码",prop:"pass"}},[a("el-input",{attrs:{size:"small",type:"password","auto-complete":"off"},model:{value:t.createEthForm.pass,callback:function(e){t.$set(t.createEthForm,"pass",e)},expression:"createEthForm.pass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认加密密码",prop:"checkPass"}},[a("el-input",{attrs:{size:"small",type:"password","auto-complete":"off"},model:{value:t.createEthForm.checkPass,callback:function(e){t.$set(t.createEthForm,"checkPass",e)},expression:"createEthForm.checkPass"}})],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:function(e){t.shouldShowCreateDialog=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.createEthAccount}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]},E=a("VU/8")(D,I,!1,function(t){a("7TBe")},"data-v-de69b0b8",null).exports,A=a("n95b"),T={name:"account-transaction-records-view",data:function(){return{tableConfig:{rowClassName:"resource-row","cell-class-name":"res-row-cell"},paginationConfig:{target:"/qi/v1/pay/orders.json",params:{accountId:this.renderData.accountId}}}},props:{renderData:Object},components:{AccountLayout:x,FlPagination:w},mounted:function(){},filters:{toUpperCase:function(t){return t.toUpperCase().substring(1)}},computed:{navTitle:function(){return this.currencyInfo.name+"账户账单"},currencyInfo:function(){return f.b[this.renderData.currencyType]}},methods:{resolveCurrencyClass:function(t){return t.afterBalance>t.beforeBalance?"plus-status":"minus-status"},resolveTargetInfoText:function(t){var e="";switch(t.correlativeInfo.accountType){case 1:e="账户名 "+t.targetInfo.nickName;break;case 2:e="合同ID "+t.targetInfo.contractId;break;case 3:e="节点 "+Object(A.c)(t.targetInfo.nodeDomain)}return e}}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-transaction-records-view"},[a("account-layout",{attrs:{title:t.navTitle,showFooter:!1}},[a("div",{staticClass:"account-trans-records-wrap"},[a("fl-pagination",{staticClass:"transaction-records",attrs:{config:t.tableConfig,pagination:t.paginationConfig}},[a("template",{slot:"list"},[a("el-table-column",{attrs:{label:"分类",align:"center",width:"70"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"trans-type",class:["trans-type-"+t.row.tradeType]},[a("i")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"交易时间",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"trans-date"},[a("div",{staticClass:"trans-date-1"},[t._v(t._s(t._f("fmtDate")(e.row.createDate,"yyyy-MM-dd")))]),t._v(" "),a("div",{staticClass:"trans-date-2"},[t._v(t._s(t._f("fmtDate")(e.row.createDate,"hh:mm")))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{width:"380",label:"名称|对方|流水号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"trans-target-info"},[a("p",{staticClass:"trans-target-name",attrs:{title:e.row.tradeDesc}},[t._v(t._s(e.row.tradeDesc))]),t._v(" "),a("div",{staticClass:"trans-target-sub-name"},[e.row.targetInfo?a("span",[t._v(t._s(t.resolveTargetInfoText(e.row)))]):t._e(),t._v(" "),a("span",{attrs:{title:e.row.tradeId}},[t._v(t._s(e.row.tradeId))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"金额|币种",align:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"trans-amount-info",class:[t.resolveCurrencyClass(e.row)]},[a("span",[a("i",{staticClass:"minus-icon"},[t._v("-")]),a("i",{staticClass:"plus-icon"},[t._v("+")]),t._v(t._s(t._f("humanizeCurrency")(Math.abs(e.row.amount),t.currencyInfo.abbr)))]),t._v(" "),a("label",[t._v(t._s(t._f("toUpperCase")(t.currencyInfo.abbr)))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"trans-remark",attrs:{title:e.row.remark}},[t._v("\n                "+t._s(e.row.remark)+"\n              ")])]}}])})],1),t._v(" "),a("div",{staticClass:"footer-comment",attrs:{slot:"footer"},slot:"footer"},[t._v("\n          注释：\n          "),a("ul",[a("li",{staticClass:"trans-type trans-type-1"},[a("i"),t._v("充值")]),t._v(" "),a("li",{staticClass:"trans-type trans-type-2"},[a("i"),t._v("转账")]),t._v(" "),a("li",{staticClass:"trans-type trans-type-3"},[a("i"),t._v("节点消费")])])])],2)],1)])],1)},staticRenderFns:[]},F=a("VU/8")(T,S,!1,function(t){a("/uyM")},"data-v-75270782",null).exports,H={name:"account-reset-pay-password-view",data:function(){var t=this,e=/^\d{6}$/;return{form:{password:"",newPassword:"",checkNewPassword:""},rules:{password:[{required:!0,message:"请输入支付密码",trigger:"blur"},{min:6,max:6,message:"由6位数字组成",trigger:"blur"}],newPassword:[{required:!0,message:"请输入支付密码",trigger:"blur"},{validator:function(a,n,s){""===n?s(new Error("请输入密码")):e.test(n)?(""!==t.form.checkNewPassword&&t.$refs.formRef.validateField("checkNewPassword"),s()):s(new Error("请输入6位数字"))},trigger:"blur"},{min:6,max:6,message:"由6位数字组成",trigger:"blur"}],checkNewPassword:[{required:!0,message:"请输入支付确认密码",trigger:"blur"},{validator:function(a,n,s){""===n?s(new Error("请再次输入密码")):e.test(n)?n!==t.form.newPassword?s(new Error("两次输入密码不一致!")):s():s(new Error("请输入6位数字"))},trigger:"change"},{min:6,max:6,message:"由6位数字组成",trigger:"blur"}]}}},props:{renderData:Object},components:{AccountLayout:x},mounted:function(){console.log(this.renderData)},computed:{navTitle:function(){return"重置"+this.renderData.accountName+"支付密码"}},methods:{resetHandler:function(){var t=this;this.$refs.formRef.validate(function(e){e&&t.$axios.put("/v1/pay/accounts/"+t.renderData.accountId,{originalPassword:t.form.password,newPassword:t.form.newPassword}).then(function(e){var a=e.data;0===a.ret&&0===a.errcode?(t.$message.success("支付密码重置成功"),t.$store.dispatch("changePanel","my-accounts")):t.$error.showErrorMessage(e.data.msg)})})}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-reset-pay-password-view"},[a("account-layout",{attrs:{title:t.navTitle}},[a("el-form",{ref:"formRef",attrs:{"label-width":"120px",rules:t.rules,model:t.form,"status-icon":"","label-position":"left"}},[a("el-form-item",{attrs:{label:"旧支付密码",prop:"password"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新支付密码",prop:"newPassword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",type:"password"},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确认支付密码",prop:"checkNewPassword"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{size:"small",type:"password"},model:{value:t.form.checkNewPassword,callback:function(e){t.$set(t.form,"checkNewPassword",e)},expression:"form.checkNewPassword"}})],1)],1),t._v(" "),a("template",{slot:"footer"},[a("el-button",{staticClass:"ft-btn",attrs:{type:"primary"},on:{click:t.resetHandler}},[t._v("确定重置")])],1)],2)],1)},staticRenderFns:[]},U=a("VU/8")(H,O,!1,function(t){a("Owy9")},"data-v-71637e73",null).exports,j={name:"account-withdraw-view",data:function(){return{}},props:{renderData:Object},components:{AccountLayout:x},mounted:function(){console.log(this.renderData)},computed:{},methods:{cancelHandler:function(){this.goBack()},goBack:function(){this.$store.dispatch("changePanel","my-accounts")}}},z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"account-withdraw-view"},[e("account-layout",{attrs:{title:"提现",showFooter:!1}},[this._v("\n    待开发\n  ")])],1)},staticRenderFns:[]},R=a("VU/8")(j,z,!1,function(t){a("01nu")},"data-v-e256678e",null).exports,V={name:"account-transfer-view",data:function(){return{form:{fromAccountId:"",toAccountId:"",amount:"",password:"",remark:""},rules:{fromAccountId:[{required:!0,message:"请输入付款方账户ID",trigger:"blur"}],toAccountId:[{required:!0,message:"请输入收款方账户ID",trigger:"blur"}],amount:[{required:!0,message:"请输入转账金额",trigger:"blur"}],password:[{required:!0,message:"请输入支付密码",trigger:"blur"}]}}},props:{renderData:Object},components:{AccountLayout:x},mounted:function(){this.form.fromAccountId=this.renderData.accountId,console.log(this.renderData)},computed:{navTitle:function(){return this.currencyInfo.name+"转账"},currencyInfo:function(){return f.b[this.renderData.currencyType]}},methods:{transferHandler:function(){var t=this,e=arguments;this.$refs.formRef.validate(function(a){if(a){var n=Object.assign({},t.form);n.amount=n.amount*t.currencyInfo.unit,t.$axios.post("/v1/pay/transfer",n).then(function(e){var a=e.data;0===a.ret&&0===a.errcode?(t.$message.success("转账成功"),t.$store.dispatch("changePanel","my-accounts")):t.$error.showErrorMessage(e)})}else console.warn(e)})}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-transfer-view"},[a("account-layout",{attrs:{title:t.navTitle}},[a("el-form",{ref:"formRef",attrs:{"label-width":"100px",rules:t.rules,model:t.form,"label-position":"left"}},[a("el-form-item",{attrs:{label:"付款方账户ID"}},[t._v("\n        "+t._s(t.form.fromAccountId)+"\n        ")]),t._v(" "),a("el-form-item",{attrs:{label:"收款方账户ID"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.toAccountId,callback:function(e){t.$set(t.form,"toAccountId",e)},expression:"form.toAccountId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"转账金额"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),t._v(" "),a("label",[t._v(t._s(t.currencyInfo.abbr))])],1),t._v(" "),a("el-form-item",{attrs:{label:"支付密码"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{size:"small",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),a("template",{slot:"footer"},[a("el-button",{staticClass:"ft-btn",attrs:{type:"primary"},on:{click:t.transferHandler}},[t._v("转账")])],1)],2)],1)},staticRenderFns:[]},M=a("VU/8")(V,B,!1,function(t){a("6DHB")},"data-v-25f4432b",null).exports,L={name:"resource-contract-detail-view",data:function(){return{}},props:{renderData:Object},components:{AccountLayout:x},mounted:function(){console.log(this.renderData)},computed:{},methods:{}},q={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"resource-contract-detail-view"},[e("account-layout",{attrs:{title:"资源详情",showFooter:!1,"return-name":"my-resources"}},[this._v("\n    待开发\n  ")])],1)},staticRenderFns:[]},W=a("VU/8")(L,q,!1,function(t){a("9Db8")},"data-v-3a59b9a7",null).exports,Y={data:function(){return{}},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t})({},Object(r.b)({personal:"personal"})),mounted:function(){},components:{NavTopBar:o.a,MyAccounts:h,MyProfile:l,MyCollections:d,MyResources:y,AccountCreateView:N,AccountRechargeView:E,AccountTransactionRecordsView:F,AccountResetPayPasswordView:U,AccountWithdrawView:R,AccountTransferView:M,ResourceContractDetailView:W},methods:{}},G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e(this.personal.panelName,{tag:"component",attrs:{renderData:this.personal.data}})],1)},staticRenderFns:[]},K=a("VU/8")(Y,G,!1,function(t){a("pdE+")},"data-v-5afdd120",null).exports;!function(t){new n.a(Object.assign({el:"#main-app",store:s.a},t))}({render:function(t){return t(K)}})},"9Db8":function(t,e,a){},DrAW:function(t,e,a){},"H+kY":function(t,e,a){},O610:function(t,e,a){},Owy9:function(t,e,a){},SBTx:function(t,e,a){},Ua9G:function(t,e,a){},ZHUQ:function(t,e,a){},dW81:function(t,e,a){"use strict";var n=a("NYxO"),s={name:"nav-top-bar",data:function(){return{}},computed:Object(n.b)({userInfo:"session"}),mounted:function(){this.syncUserSession(),this.listenWindowVisibility()},methods:{listenWindowVisibility:function(){function t(t){var a="visible",s="hidden",r={focus:a,focusin:a,pageshow:a,blur:s,focusout:s,pagehide:s};"visible"===((t=t||window.event).type in r?r[t.type]:this[e]?"hidden":"visible")&&n.syncUserSession()}var e="hidden",a=document,n=this;e in a?a.addEventListener("visibilitychange",t):(e="mozHidden")in a?a.addEventListener("mozvisibilitychange",t):(e="webkitHidden")in a?a.addEventListener("webkitvisibilitychange",t):(e="msHidden")in a?a.addEventListener("msvisibilitychange",t):window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t},syncUserSession:function(){var t=this;this.$store.dispatch("checkUserSession").then(function(e){e||t.$store.dispatch("loadCurrentUserInfo").then(function(){location.reload()})})},logoutHandler:function(){var t=this;this.$axios.get("/v1/passport/logout").then(function(){t.$vuex.dispatch("userLogout").then(function(){setTimeout(function(){location.replace("/pages/user/login.html")},20)})})},handleNavTopCommand:function(t){switch(t){case"gotoAccountSetting":location.href="/pages/account/security.html"}}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-top-wrapper"},[t.userInfo?a("div",{staticClass:"nav-top-container"},[a("ul",{staticClass:"nav-top-right"},[a("li",{staticClass:"nav-top-item"},[a("el-dropdown",{on:{command:t.handleNavTopCommand}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n                      "+t._s(t.userInfo.nickname)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"gotoAccountSetting"}},[t._v("账户设置")])],1)],1)],1),t._v(" "),a("li",{staticClass:"nav-top-item",on:{click:t.logoutHandler}},[t._v("退出")]),t._v(" "),t._m(0)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"nav-top-item"},[e("a",{attrs:{href:"/pages/user/index.html"}},[this._v("我的feth")])])}]},o=a("VU/8")(s,r,!1,function(t){a("wUdz")},"data-v-02bebf23",null);e.a=o.exports},daBu:function(t,e,a){},eDbg:function(t,e,a){},"pdE+":function(t,e,a){},wUdz:function(t,e,a){}},["7xrK"]);