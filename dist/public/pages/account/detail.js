webpackJsonp([5],{"1nuA":function(t,n,e){"use strict";n.decode=n.parse=e("kMPS"),n.encode=n.stringify=e("xaZU")},"6UCX":function(t,n,e){"use strict";var a=e("G3VR"),i=e("dW81"),s=e("NYxO"),o={name:"user-aside-nav",data:function(){return{activeNavName:"my-accounts",navs:[{title:"我的关注",name:"my-collections"},{title:"我的资源",name:"my-resources"},{title:"我的账户",name:"my-accounts"},{title:"资料与账号",name:"my-profile"}]}},computed:Object(s.b)({user:"session"}),mounted:function(){var t=this;this.user&&this.user.userId||this.$vuex.dispatch("getCurrentUserInfo").then(function(n){t.changePanel()})},methods:{switchNavHandler:function(t){this.activeNavName=t.name,this.changePanel()},changePanel:function(){this.$store.dispatch("changePanel",this.activeNavName)}}},r={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.user?e("el-aside",{staticClass:"user-aside-nav-wrap",attrs:{width:"260px"}},[e("div",{staticClass:"user-portrait"},[e("div",{staticClass:"center"},[e("a",{attrs:{href:"/pages/user/index.html"}},[e("img",{staticClass:"portrait-img",attrs:{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRb_dez7L9rZGrxliWIWRzbH6H0u0BMePCrTB6wVbLtcfrAMKII",alt:""}})]),t._v(" "),e("p",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))])])]),t._v(" "),e("ul",{staticClass:"user-nav-tabs"},t._l(t.navs,function(n,a){return e("li",{staticClass:"user-nav-item",class:{active:n.name===t.activeNavName},attrs:{"nav-name":n.name},on:{click:function(e){t.switchNavHandler(n)}}},[t._v("\n      "+t._s(n.title)+"\n    ")])}))]):t._e()},staticRenderFns:[]},c=e("VU/8")(o,r,!1,function(t){e("eDbg")},"data-v-2295e0b3",null).exports,u={data:function(){return{}},computed:(Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t})({},Object(s.b)({personal:"personal"}),{themeCls:function(){var t="white";switch(this.personal.panelName){case"my-accounts":t="transparent";break;default:t="white"}return t}}),mounted:function(){},components:{NavTopBar:i.a,UserAsideNav:c},methods:{}},l={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",[n("nav-top-bar"),this._v(" "),n("el-container",{staticClass:"app-container"},[n("user-aside-nav"),this._v(" "),n("el-main",{staticClass:"main-app-content",class:[this.themeCls]},[n("div",{attrs:{id:"main-app"}})])],1)],1)},staticRenderFns:[]},d=e("VU/8")(u,l,!1,function(t){e("SBTx")},"data-v-d1be6906",null).exports,v=e("IcnI");new a.a({el:"#app",store:v.a,render:function(t){return t(d)}});n.a=a.a},PLvn:function(t,n,e){},SBTx:function(t,n,e){},YnZJ:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("6UCX"),i=e("1nuA"),s=e.n(i),o=e("aIHY"),r={data:function(){return{accountDetail:null}},mounted:function(){var t=this,n=s.a.parse(location.search.slice(1));this.loadAccountDetail(n.accountId).then(this.format.bind(this)).then(function(n){return t.accountDetail=n,n.accountId}).then(this.loadBalance.bind(this))},methods:{initAccountAmount:function(){var t=this,n=this.accountDetail.accountId;return this.$axios.get("/v1/pay/accounts/officaialTap?accountId="+n).then(function(n){var e=n.data;0===e.errcode?(t.accountDetail.balance=1e5,t.$message.success("执行成功")):t.$message.error(e.msg)})},format:function(t){return t._accountTypeInfo=o.b[t.accountType],t},loadBalance:function(t){var n=this;return this.$axios.get("/v1/pay/accounts/balance/"+t).then(function(t){var e=t.data;0===e.errcode?n.accountDetail.balance=e.data.balance:n.$message.error(e.msg)})},loadAccountDetail:function(t){var n=this;return this.$axios.get("/v1/pay/accounts/"+t).then(function(t){var e=t.data;if(0===e.errcode)return e.data;n.$message.error(e.msg)})}}},c={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"main-app"}},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.initAccountAmount}},[t._v("初始化账户金额")])],1),t._v(" "),t.accountDetail?e("ul",{staticClass:"account-detail"},[e("li",[e("label",[t._v("accountId")]),t._v(" "),e("span",[t._v(t._s(t.accountDetail.accountId))])]),t._v(" "),e("li",[e("label",[t._v("accountType")]),t._v(" "),e("span",[t._v(t._s(t.accountDetail._accountTypeInfo.name))])]),t._v(" "),e("li",[e("label",[t._v("balance")]),t._v(" "),e("span",[t._v(t._s(t._f("humanizeCurrency")(t.accountDetail.balance))+" "+t._s(t.accountDetail._accountTypeInfo.abbr))])]),t._v(" "),e("li",[e("label",[t._v("cardNo")]),t._v(" "),e("span",[t._v(t._s(t.accountDetail.cardNo))])]),t._v(" "),e("li",[e("label",[t._v("status")]),t._v(" "),e("span",[t._v(t._s(t.accountDetail.status))])]),t._v(" "),e("li",[e("label",[t._v("createDate")]),t._v(" "),e("span",[t._v(t._s(t._f("fmtDate")(t.accountDetail.createDate)))])]),t._v(" "),e("li",[e("label",[t._v("updateDate")]),t._v(" "),e("span",[t._v(t._s(t._f("fmtDate")(t.accountDetail.updateDate)))])])]):t._e()])},staticRenderFns:[]},u=e("VU/8")(r,c,!1,function(t){e("PLvn")},null,null).exports;new a.a({el:"#main-app",render:function(t){return t(u)}})},dW81:function(t,n,e){"use strict";var a=e("NYxO"),i={name:"nav-top-bar",data:function(){return{}},computed:Object(a.b)({userInfo:"session"}),mounted:function(){this.syncUserSession(),this.listenWindowVisibility()},methods:{listenWindowVisibility:function(){function t(t){var e="visible",i="hidden",s={focus:e,focusin:e,pageshow:e,blur:i,focusout:i,pagehide:i};"visible"===((t=t||window.event).type in s?s[t.type]:this[n]?"hidden":"visible")&&a.syncUserSession()}var n="hidden",e=document,a=this;n in e?e.addEventListener("visibilitychange",t):(n="mozHidden")in e?e.addEventListener("mozvisibilitychange",t):(n="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",t):(n="msHidden")in e?e.addEventListener("msvisibilitychange",t):window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t},syncUserSession:function(){var t=this;this.$store.dispatch("checkUserSession").then(function(n){n||t.$store.dispatch("loadCurrentUserInfo").then(function(){location.reload()})})},logoutHandler:function(){var t=this;this.$axios.get("/v1/passport/logout").then(function(){t.$vuex.dispatch("userLogout").then(function(){setTimeout(function(){location.replace("/pages/user/login.html")},20)})})},handleNavTopCommand:function(t){switch(t){case"gotoAccountSetting":location.href="/pages/account/security.html"}}}},s={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"nav-top-wrapper"},[t.userInfo?e("div",{staticClass:"nav-top-container"},[e("ul",{staticClass:"nav-top-right"},[e("li",{staticClass:"nav-top-item"},[e("el-dropdown",{on:{command:t.handleNavTopCommand}},[e("span",{staticClass:"el-dropdown-link"},[t._v("\n                      "+t._s(t.userInfo.nickname)),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",{attrs:{command:"gotoAccountSetting"}},[t._v("账户设置")])],1)],1)],1),t._v(" "),e("li",{staticClass:"nav-top-item",on:{click:t.logoutHandler}},[t._v("退出")]),t._v(" "),t._m(0)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("li",{staticClass:"nav-top-item"},[n("a",{attrs:{href:"/pages/user/index.html"}},[this._v("我的feth")])])}]},o=e("VU/8")(i,s,!1,function(t){e("wUdz")},"data-v-02bebf23",null);n.a=o.exports},eDbg:function(t,n,e){},kMPS:function(t,n,e){"use strict";function a(t,n){return Object.prototype.hasOwnProperty.call(t,n)}t.exports=function(t,n,e,s){n=n||"&",e=e||"=";var o={};if("string"!=typeof t||0===t.length)return o;var r=/\+/g;t=t.split(n);var c=1e3;s&&"number"==typeof s.maxKeys&&(c=s.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,v,p,f,h=t[l].replace(r,"%20"),m=h.indexOf(e);m>=0?(d=h.substr(0,m),v=h.substr(m+1)):(d=h,v=""),p=decodeURIComponent(d),f=decodeURIComponent(v),a(o,p)?i(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},wUdz:function(t,n,e){},xaZU:function(t,n,e){"use strict";function a(t,n){if(t.map)return t.map(n);for(var e=[],a=0;a<t.length;a++)e.push(n(t[a],a));return e}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,e,r){return n=n||"&",e=e||"=",null===t&&(t=void 0),"object"==typeof t?a(o(t),function(o){var r=encodeURIComponent(i(o))+e;return s(t[o])?a(t[o],function(t){return r+encodeURIComponent(i(t))}).join(n):r+encodeURIComponent(i(t[o]))}).join(n):r?encodeURIComponent(i(r))+e+encodeURIComponent(i(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var n=[];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}}},["YnZJ"]);